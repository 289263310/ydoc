<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>panel Demo</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta name="format-detection" content="telephone=no,email=no" />
    <link rel="stylesheet" href="../../../prd/yo/usage/export/yo-flex.css" />
    <link rel="stylesheet" href="../../../prd/yo/usage/kami/panel.css" />
</head>
<body>
<section class="yo-flex">
    <header class="yo-header m-header">
        <h2 class="title">panel</h2>
        <a href="index.html" class="regret yo-ico">&#xf07d;</a>
        <span class="affirm yo-ico">&#xf067;</span>
    </header>
    <!-- 外部容器，有固定高度 -->
    <div class="flex" id="container" style="overflow: hidden">
        <!-- 滚动容器，必须 -->
        <div data-role="scroller">
            <!-- 内容容器，必须 -->
            <div data-role="body">
                <!-- 内容 -->
                <div style="height: 200px">12312</div>
                <div style="height: 200px">12312</div>
                <div style="height: 200px">12312</div>
                <div style="height: 200px">12312</div>
                <div style="height: 200px">12312</div>
                <div style="height: 200px">12312</div>
            </div>
        </div>
    </div>
</section>

<script type="demo/javascript">

</script>
<script type="text/javascript" src="../../../prd/scripts/common.js"></script>
<script type="text/javascript" src="../../../prd/scripts/kami-panel.js"></script>
<script type="text/javascript">

// 获取组件。require("path/to/panel")
var Panel = Kami.Panel;

// 生成数据数据
function getRandomData () {
    var tt = $.map(Array(20), function(item, i){
        return '<div class="item" style="height: '+(Math.floor(Math.random() * 20) + 30)+'px">teeet'+i+'</div>';
    }).sort(function(){
        return Math.random() > 0.5 ? 1 : -1;
    });
    return tt.join('');
}

var options = {
    container: '#container',

    useRefresh: true,
    // 开启上拉加载更多
    useLoadmore: true
}

var panel = new Panel( options );
    panel.on('tap', function(){
        Demo.log('tap')
    });

    // 加载更多触发事件，必须
    panel.on('loadmore', function(){
        var self = this;
        var data = getRandomData();
        // 模拟ajax
        setTimeout(function(){
            // 刷新数据，并且关闭刷新提示
            // 使用loadMore方法添加数据
            self.loadMore( data );
        }, 500)
    });
    // 刷新触发事件，必须
    panel.on('refresh', function(){
        var data = getRandomData();
        // 刷新数据，并且关闭刷新提示
        // 使用refresh刷新数据
        this.refresh( data );
    });

    panel.render();

</script>
</body>
</html>