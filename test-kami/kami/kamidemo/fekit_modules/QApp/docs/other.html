<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>QApp Document 其他相关</title>
    <link href="source/bootstrap.min.css" rel="stylesheet">
    <link href="source/patch.css" rel="stylesheet">
    <link href="source/docs.min.css" rel="stylesheet">
    <link rel="stylesheet" href="source/highlight.min.css">
    <style>
        blockquote.api {
            padding: 0 10px;
            border-left-color: #1b809e;
            margin-top: 50px;
        }

        table.table {
            border: 1px solid #1b809e;
        }

        table.table>tbody>tr>th {
            border-top: none;
        }

        h4 {
            padding: 20px 0 10px 0;
            border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>
<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>


<!-- Docs master nav -->
<header class="navbar navbar-static-top bs-docs-nav" id="top" role="banner">
    <div class="container">
        <div class="navbar-header">
            <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>
        <nav id="bs-navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="http://ued.qunar.com/mobile/">X1</a>
                </li>
                <li class="active">
                    <a href="index.html">QApp</a>
                </li>
                <li>
                    <a href="http://ued.qunar.com/mobile/kami/">Kami</a>
                </li>
                <li>
                    <a href="http://ued.qunar.com/mobile/yo/demo/">Yo</a>
                </li>
                <li>
                    <a href="http://hy.qunar.com/source/qunarapi.html">QunarAPI</a>
                </li>
            </ul>
        </nav>
    </div>
</header>

<!-- Docs page layout -->

<hr style="border-color: #6f5499; margin: 0"/>

<header class="navbar navbar-static-top bs-docs-nav">
    <div class="container">
        <nav class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                
                <li class="">
                    <a href="index.html">简介</a>
                </li>
                
                <li class="">
                    <a href="getting-started.html">起步</a>
                </li>
                
                <li class="">
                    <a href="api.html">API</a>
                </li>
                
                <li class="">
                    <a href="hybird.html">混合开发</a>
                </li>
                
                <li class="">
                    <a href="plugins.html">插件</a>
                </li>
                
                <li class="active">
                    <a href="other.html">其他相关</a>
                </li>
                
                <li class="">
                    <a href="about.html">关于 QApp</a>
                </li>
                
            </ul>
        </nav>
    </div>
</header>


<div class="container bs-docs-container">
    
    <div class="row">
        <div class="col-md-9" role="main">
            
            
            <div class="bs-docs-section">
            
            <h1 id="从0-2升级到0-4的说明" class="page-header">从0.2升级到0.4的说明</h1>
            
            <p>QApp 0.2 升级 0.4 说明：</p>

<ul><li>在 dom 结构上，去除了 qapp-container 这一层</li><li>减少一些容易造成混淆的API</li><li>重新设计的router</li></ul>

<h3>注意事项：</h3>

<p>删除的API：renderHash、addHashSupport
通过hash渲染视图，会在框架中自动进行，不用业务调用。</p>

<p>addHashSupport 是增加hash支持，现在hashRouter默认开启，并且默认所有视图都会有路由
特殊配置可以通过 QApp.config 的 hashSupport 配置</p>

<pre><code>QApp.config({
    &quot;hashSupport&quot;: {
        &quot;all&quot;: true,
        &quot;exist&quot;: [],  // 白名单 
        &quot;except&quot;: []  // 黑名单
    }
});</code></pre>

<p>用户只需要这样简单的配置，即可支持路由功能，支持浏览器的刷新、前进、后退，并和前端逻辑的一样。</p>

<p>【重要】 在使用 open 时，不建议使用 onComplete 回调，改为使用 receiveData 事件来监听。 <code>view.on(‘receiveData’, function(data) {});</code>
data的主要参数为，data.view: 来源的视图名， data.data: 传回的数据。</p>

<ul><li>现在也支持 onComplete 的形式，但是兼容性不好，主要因为再任意一个视图，用户有可能都会刷新，如果需要回调数据的视图都不支持hash的话，用onComplete是没有问题的</li><li>为什么支持Hash时就不行？支持Hash就相当于用户可以进到B。A视图 打开 B视图，B可以回传数据，用onComplete接收。但是如果用户此时在 B 视图刷新，此时，A视图没有渲染，肯定没有open - onComplete，这时B回传的数据，A接收不到。而receiveData能接到所有页面跳回的数据，而且和native的逻辑一致。</li><li>同样的，在视图回调时，不建议使用 view.complete（data） 了，直接用 view.hide(data) 即可。</li></ul>

<p>Open和Show的区别是，前者基于路由，后者不基于。open多用于视图的切换，表现效果是，新视图从页面右侧划入，在客户端上的表现为新开WebView。show多用于组件的渲染，表现形式为叠层下来等。</p>

<p>另外，视图取消了router事件，然后统一用视图的生命周期来处理相应逻辑，actived（被激活） 和 deactived （取消激活）事件</p>

<h3>要注意的地方：</h3>

<ul><li>新的QApp会自动渲染首页视图，所以必须配 QApp.config({indexView: &#39;首页的名称&#39;})，默认是 index，如果用了 QApp-Hy，用QApp.hy.config() 配置过了 indexView，那么你不用再配置了。</li><li>由于老版本 QApp 不自动渲染首页View，导致业务再入口文件中，自己主动渲染了首页View，现在需要去掉。</li><li>由于原router不是很好用，很多业务线都把hashRouter置为false，现在已经是默认开启了，请删去false配置。</li></ul>
            </div>
            
            
            
            <div class="bs-docs-section">
            
            <h1 id="FEKit的ginstall命令" class="page-header">FEKit的ginstall命令</h1>
            
            <p>FEKit ginstall 命令的功能是，从 <code>Git</code> 源上安装 <code>FEKit</code> 的模块，主要用于定制化的 <code>FEkit</code> 模块和 <code>Feature</code> 版本的发布。</p>

<p>项目已经发布到 <code>npm</code> 上，可以从 <code>cnpm</code>， <code>qnpm</code> 安装，安装方式 <code>npm install fekit-extension-ginstall -g</code>，项目地址: <a href="https://github.com/EdwonLim/fekit-extension-ginstall">https://github.com/EdwonLim/fekit-extension-ginstall</a>。</p>

<h3>使用</h3>

<blockquote><p>fekit ginstall repo [-b branch] [-t tag] </p></blockquote>

<ul><li><code>repo</code>: 项目 <code>Git</code> 地址</li><li><code>branch</code>: 分支名</li><li><code>tag</code>: <code>Tag</code> 名</li></ul>
            </div>
            
            
        </div>
        <div class="col-md-3" role="complementary">
            <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm">
                <ul class="nav bs-docs-sidenav">
                    
                    <li>
                        <a href="#从0-2升级到0-4的说明">从0.2升级到0.4的说明</a>
                        
                    </li>
                    
                    <li>
                        <a href="#FEKit的ginstall命令">FEKit的ginstall命令</a>
                        
                    </li>
                    
                </ul>
            </nav>
        </div>
    </div>
    
</div>

<!-- Footer
================================================== -->
<footer class="bs-docs-footer" role="contentinfo">
    <div class="container">
        <p>Made By Qunar Hotel FE Mobile Team. © 2014 - 2015<br /> Style Build By <a href="http://bootcss.com">Bootstrap</a></p>
    </div>
</footer>

<script src="source/jquery.min.js"></script>
<script src="source/bootstrap.min.js"></script>
<script src="source/docs.min.js"></script>
<script src="source/highlight.min.js"></script>
<script>
    $(document).ready(function() {
        $('code').each(function(i, block) {
            if (block.innerHTML.indexOf('\n') != -1) {
                var pn = block.parentNode;
                if (pn.tagName.toUpperCase() == 'PRE') {
                    try {
                        hljs.highlightBlock(block);
                    } catch(e) {}
                } else {
                    pn.innerHTML = '<pre><code>' + block.innerHTML + '</code></pre>';
                    try {
                        hljs.highlightBlock(pn.childNodes[0].childNodes[0]);
                    } catch(e) {}
                }
            }
        });
    });
</script>
</body>
</html>
