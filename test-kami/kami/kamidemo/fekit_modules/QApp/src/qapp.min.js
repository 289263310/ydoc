!function(){"use strict";function a(a,b){oa[a]=b()}function b(a){return oa[a]}function c(){}function d(a){var b,c=[];for(b in a)c.push(b);return c}function e(a,b){var c=Qa[a===ta||a!==a?a:Aa.call(a)]||a&&a.nodeName||"#";return a===ua?c="Undefined":"#"===c.charAt(0)&&(c=a==a.document&&a.document!=a?"Window":9===a.nodeType?"Document":a.callee?"Arguments":isFinite(a.length)&&a.item?"NodeList":Aa.call(a).slice(8,-1)),b?b===c:c}function f(a){return e(a,"Object")}function g(a){return e(a,"Array")}function h(a){return e(a,"String")}function i(a){return e(a,"Function")}function j(a){return a&&1===a.nodeType?a instanceof Node?ra:Da.test(Aa.call(a)):sa}function k(a){return e(a,"Number")}function l(a){return e(a,"Object")&&Object.getPrototypeOf(a)===ya}function m(a){try{return"{}"===JSON.stringify(a)}catch(b){return FLASE}}function n(a,b,c){var d;for(d in b)c&&(l(b[d])||g(b[d]))?(l(b[d])&&!l(a[d])&&(a[d]={}),g(b[d])&&!g(a[d])&&(a[d]=[]),n(a[d],b[d],c)):b[d]!==ua&&(a[d]=b[d])}function o(a){var b,c=Ba.call(arguments,1);return"boolean"==typeof a&&(b=a,a=c.shift()),c.forEach(function(c){n(a,c,b)}),a}function p(a,b){var c;for(c in a)b.call(a,c,a[c])}function q(a){if(!a)return sa;var b=a.length;if(b===b>>>0)try{return Ba.call(a)}catch(c){}return sa}function r(a,b){return pa.setTimeout(a,b||0)}function s(a,b){for(var c={},d=0;d<b.length;d++)c[b[d]]=a[d];return c}function t(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=a[b[d]];return c}function u(){return Ga++}function v(){return Ha++}function w(a){return a.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})}function x(a){return a.replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/\_/g,"-").toLowerCase()}function y(a){var b;for(b in a)a[b]=ta}function z(a){return a===ua||a===ta}function A(a,b){return a=(a===ta?"":a).toString().trim(),b?encodeURIComponent(a):a}function B(a,b){var c,d,e,f=[];for(c in a)if(z(a[c]))f=f.concat(c);else if(g(a[c]))for(d=0,e=a[c].length;e>d;d++)i(a[c][d])||f.push(c+"="+A(a[c][d],b));else i(a[c])||a[c]===ta||a[c]===ua||f.push(c+"="+A(a[c],b));return f.join("&")}function C(a,b){return z(a)?a:b?decodeURIComponent(a):a}function D(a,b){for(var c=a.trim().split("&"),d={},e=0,f=c.length;f>e;e++)if(c[e]){var g=c[e].split("="),h=g[0],i=g[1];h in d?d[h]=[].concat(d[h],C(i,b)):d[h]=C(i,b)}return d}function E(a){var b,c=sa;return function(){return c?b:(c=ra,b=a.apply(this,arguments),a=ta,b)}}function F(){var a=function(){};return o(a.prototype,Sa),new a}function G(){function a(a,h,j){i(c)&&!e&&(e=ra,c(f)),i(a)&&("resolved"===d?a.apply(ta,b):"pending"===d&&g.add("resolve",a)),i(h)&&("rejected"===d?h.apply(ta,b):"pending"===d&&g.add("reject",h)),i(j)&&g.add("notify",j)}var b,c,d="pending",e=sa,f={},g=function(){var a={resolve:[],reject:[],notify:[]};return{add:function(b,c){a[b].push(c)},remove:function(b,c){var d=a[b].indexOf(c);d>-1&&a[b].splice(d,1)},clear:function(b){a[b].length=0},fire:function(b,c){a[b].forEach(function(a){a.apply(ta,c)})},destroy:function(){a.resolve.length=0,a.reject.length=0,a.notify.length=0}}}();return f.enabled=ra,f.all=function(b){return a(b,b),f},f.done=function(b){return a(b),f},f.fail=function(b){return a(ta,b),f},f.progress=function(b){return a(ta,ta,b),f},f.unProgress=function(a){return g.remove("notify",a),f},f.then=function(b,c,d){return a(b,c,d),f},f.resolve=function(){return"pending"===d&&(d="resolved",b=Ba.call(arguments),g.fire("resolve",b)),f},f.reject=function(){return"pending"===d&&(d="rejected",b=Ba.call(arguments),g.fire("reject",b)),f},f.notify=function(){return g.fire("notify",Ba.call(arguments)),f},f.state=function(){return d},f.startWith=function(a){return c=a,f},f.destroy=function(){f.enabled=sa,f.notify("destroy"),d=ta,b=ta,e=ta,c=ta,f.destroy=function(){},f=ta,g.destroy(),g=ta},f}function H(a,b,c){var d=new G,e=c?a:a.slice(0),f=[],g=-1,h=function(a){return(h=b&&b.length?function(a){return b[a]}:function(a){return a})(a)},j=function(){g++;var c=e.shift();if(c&&i(c.all))c.all(function(b){d.notify(h(g),b,a),f[g]=b,j()});else if(c)if(i(c)){var k=c(f[g-1],f);k&&i(k.all)?k.all(function(b){d.notify(h(g),b,a),f[g]=b,j()}):(d.notify(h(g),k,a),f[g]=k,j())}else d.notify(h(g),c,a),f[g]=c,j();else b&&b.length&&(f=s(f,b)),d.resolve.call(ta,f)};return d.startWith(j)}function I(a,b){var c=new G,d=a.slice(0),e=[],f=0,g=function(){f===d.length&&(b&&b.length&&(e=s(e,b)),c.resolve.call(ta,e))},h=function(){d.forEach(function(a,b){a&&i(a.all)?(e[b]=ua,a.all(function(a){e[b]=a,f++,g()})):(e[b]=a,f++)}),g()};return c.startWith(h)}function J(a){Ca.test(qa.readyState)&&qa.body?a():T(qa,"DOMContentLoaded",function(){a()},sa)}function K(a){var b,c,d="div";return[["li","ul"],["tr","tbody"],["td","tr"],["th","tr"],["tbody","table"],["option","select"]].some(function(b){return 0===a.indexOf("<"+b[0])?(d=b[1],ra):void 0}),b=qa.createElement(d),b.innerHTML=a,c=q(b.children),b=qa.createDocumentFragment(),c.forEach(function(a){b.appendChild(a)}),{box:b,children:c}}function L(a,b){b=[].concat(b),b.forEach(function(b){a.appendChild(b)})}function M(a,b,c){switch(c=c?c.toLowerCase():"beforeend"){case"beforebegin":a.parentNode.insertBefore(b,a);break;case"afterbegin":a.insertBefore(b,a.firstChild);break;case"beforeend":a.appendChild(b);break;case"afterend":a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)}return b}function N(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function O(a,b,c){var d=c===sa||null===c||void 0===c,e=Ja[b];if("boolean"==typeof a[e]&&(a[e]=!!c,c||(d=ra)),d)return a.removeAttribute(b);var f=Ea.test(a)?sa:b in a.cloneNode(sa);f?a[b]=c:a.setAttribute(b,c)}function P(a,b){if(h(b)){if(!(arguments.length>2))return a.getAttribute(b);O(a,b,arguments[2])}else p(b,function(b,c){O(a,b,c)})}function Q(a,b){if(a&&a.style)if(h(b)){if(!(arguments.length>2)){var c,d=pa.getComputedStyle(a,ta);return d&&(c=d[w(b)]),c}var e=arguments[2];Na.test(b)?a.style[Oa]=b+"("+e+")":(b=w(b),e||0===e?a.style[b]=e:a.style.removeProperty(b))}else{var f=[],g="";p(b,function(a,b){Na.test(a)?g+=a+"("+b+") ":f.push(x(a)+":"+b)}),g.length&&f.push(x(Oa)+":"+g),a.style.cssText+=";"+f.join(";")+";"}}function R(a,b){a&&a.style&&[].concat(b).forEach(function(b){a.style.removeProperty(b),a.style.removeProperty(Pa+b)})}function S(a){if(a.target||(a.target=a.srcElement||document),3==a.target.nodeType&&(a.target=a.target.parentNode),a.pageX===ta&&a.clientX!==ta){var b=qa.documentElement,c=qa.body;a.pageX=a.clientX+(b.scrollLeft||c&&c.scrollLeft||0)-(b.clientLeft||c&&c.clientLeft||0),a.pageY=a.clientY+(b.scrollTop||c&&c.scrollTop||0)-(b.clientTop||c&&c.clientTop||0)}return a}function T(a,b,c,d){a.addEventListener(b,c,!!d)}function U(a,b,c){a.removeEventListener(b,c)}function V(a,b,c){var d=qa.createEvent("Events");d.initEvent(b,!0,!0),o(d,c),a.dispatchEvent(d)}function W(a,b){a.className=(a.className+Fa+b).split(/\s+/).filter(function(a,b,c){return c.lastIndexOf(a)===b}).join(Fa)}function X(a,b){b=Fa+b.replace(/\s+/g,Fa)+Fa,a.className=a.className.split(/\s+/).filter(function(a){return-1===b.indexOf(Fa+a+Fa)}).join(Fa)}function Y(a){var b=qa.createElement("style");b.type="text/css",b.innerHTML=a,qa.querySelector("head").appendChild(b)}function Z(a){var b;xa.ios&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()}function $(a){var b=qa.activeElement;a=a||qa.body,b&&Ta(a,b)&&i(b.blur)&&b.blur()}function _(a){function b(b){var c=a.documentElement,d=a.body;return Math.max(d["scroll"+b],c["scroll"+b],d["offset"+b],c["offset"+b],c["client"+b])}return{width:b("Width"),height:b("Height")}}function aa(a){function b(b){return a.document.documentElement["client"+b]}return{width:b("Width"),height:b("Height")}}function ba(a){var b,c=e(a);switch(c){case"Document":b=_(a);break;case"Window":b=aa(a);break;default:b={width:parseInt(Q(a,"width"),10),height:parseInt(Q(a,"height"),10)}}return b}function ca(a){var b=a.getBoundingClientRect(),c=a.ownerDocument.body,d=a.ownerDocument.documentElement,e=Math.max(pa.pageYOffset||0,d.scrollTop,c.scrollTop),f=Math.max(pa.pageXOffset||0,d.scrollLeft,c.scrollLeft),g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0;return{left:b.left+f-h,top:b.top+e-g}}function da(a,b){return{left:a.left-b.left,top:a.top-b.top}}function ea(a){return Ta(a.ownerDocument.body,a)?arguments.length>1?da(ca(a),ca(arguments[1])):ca(a):{top:NaN,left:NaN}}function fa(a){var b={};if(a)if(a.dataset)o(b,a.dataset);else for(var c=a.attributes,d=0,e=c.length;e>d;d++){var f=c[d].name,g=c[d].value;0===f.indexOf("data-")&&(f=w(f.substring(5)),b[f]=g)}return b}function ga(a,b,c){return i(a)?a.apply(b,q(c)||[]):void 0}function ha(a,b,c){function d(c,d,f){function h(){var b=c,g=fa(b);return e[d]&&e[d][i]?e[d][i]({evt:f,el:b,box:a,data:g},g):ra}var i=ta;if(Wa(b,c))return sa;if(!Ta(a,c))return sa;for(;c&&c!==a&&(1!==c.nodeType||(i=c.getAttribute(g),!i||h()!==sa));)c=c.parentNode}b||(b=[]),b=[].concat(b);var e={},f=function(a){var b=a.target,c=a.type;d(b,c,a)},g=c||"action-type",h={};return h.add=function(b,c,d,g){e[c]||(e[c]={},T(a,c,f,!!g));var h=e[c];h[b]=d},h.remove=function(b,c){e[c]&&(delete e[c][b],m(e[c])&&(delete e[c],U(a,c,f)))},h.pushExcept=function(a){b.push(a)},h.removeExcept=function(a){if(a)for(var c=0,d=b.length;d>c;c+=1)b[c]===a&&b.splice(c,1);else b=[]},h.clearExcept=function(){b=[]},h.fireAction=function(b,c,d,f){var g={};f&&f.data&&(g=f.data),e[c]&&e[c][b]&&e[c][b]({evt:d,el:ta,box:a,data:g,fireFrom:"fireAction"},g)},h.fireInject=function(b,c,d){var f=b.getAttribute(g),h=fa(b);f&&e[c]&&e[c][f]&&e[c][f]({evt:d,el:b,box:a,data:h,fireFrom:"fireInject"},h)},h.fireDom=function(a,b,c){d(a,b,c||{})},h.destroy=function(){for(var b in e){for(var c in e[b])delete e[b][c];delete e[b],U(a,b,f)}},h}function ia(a,b){var c=s(Xa.exec(a)||[],Ya);return c.query=c.query?D(c.query.substring(1),b):{},c.hash=c.hash?D(c.hash.substring(1),b):{},c.getQuery=function(a){return c.query[a]},c.getHash=function(a){return c.hash[a]},c.setQuery=function(a,b){return b===ua?c.query[a]=ta:c.query[a]=b,c},c.setHash=function(a,b){return b===ua?c.hash[a]=ta:c.hash[a]=b,c},c.toUrl=function(a){var b=c.protocol+"://",d=B(c.query,a),e=B(c.hash,a);return c.protocol&&"file"===c.protocol.toLowerCase()&&(b+="/"),b+c.hostname+(c.port||"")+c.path+(c.name||"")+(d?"?"+d:"")+(e?"#"+e:"")},c}function ja(a,b,c){var d;$a.insertBefore(a,$a.firstChild),c&&(d=r(function(){a.onload=ta,N(a),b.reject({type:"Timeout"})},c)),a.onload=function(){d&&clearTimeout(d),a.onload=ta,a.onerror=ta,b.resolve()},a.onerror=function(){d&&clearTimeout(d),N(a),a.onload=ta,a.onerror=ta,b.reject({type:"Error"})}}function ka(a,b,c){var d=o({},Za,c),e=_a[a]&&_a[a](b,d);return e&&(d.onComplete||d.onFail||d.onTimeout)&&e.then(d.onComplete,function(a){"Timeout"===a.type&&i(d.onTimeout)&&d.onTimeout(a),"Error"===a.type&&i(d.onFail)&&d.onFail(a)}),e}function la(a,b){console[a].apply(console,["["+a.toUpperCase()+"]"].concat(q(b)))}function ma(a){mb.done(a)}var na={version:"0.4.3"},oa=na._packages={},pa=window,qa=document,ra=!0,sa=!1,ta=null,ua=void 0,va={app:"qapp-app",view:"qapp-view",widget:"qapp-widget",role:"qapp-role"},wa={type:"app",indexView:"index",animate:ra,defaultAnimate:"moveEnter",autoInit:ra,hashRouter:ra,hashSupport:{all:ra,exist:[],except:[]},customRoot:ra,appRoot:ta,screen:{rotate:sa,largeChange:ra},gesture:{ctrl:ra,longTap:ra,autoBlur:ra},root:{top:0,right:0,bottom:0,left:0},logLevel:1},xa=function(){var a={},b=navigator.userAgent,c=navigator.platform,d=b.match(/(Android);?[\s\/]+([\d.]+)?/),e=b.match(/(iPad).*OS\s([\d_]+)/),f=b.match(/(iPod)(.*OS\s([\d_]+))?/),g=b.match(/(iPhone\sOS)\s([\d_]+)/);return a.ios=a.android=a.iphone=a.ipad=a.ipod=sa,d&&(a.os="android",a.osVersion=d[2],a.android=ra),(e||g||f)&&(a.os="ios",a.ios=ra),g&&(a.osVersion=g[2].replace(/_/g,"."),a.iphone=ra,a.imobile=ra),e&&(a.osVersion=e[2].replace(/_/g,"."),a.ipad=ra),f&&(a.osVersion=f[3]?f[3].replace(/_/g,"."):ta,a.ipod=ra,a.imobile=ra),a.ios&&a.osVersion&&b.indexOf("Version/")>=0&&"10"===a.osVersion.split(".")[0]&&(a.osVersion=b.toLowerCase().split("version/")[1].split(" ")[0]),a.osVersion&&(a.osVersionN=parseInt(a.osVersion.match(/\d+\.?\d*/)[0])),a.pixelRatio=pa.devicePixelRatio||1,a.retina=a.pixelRatio>=2,a.pc=0===c.indexOf("Mac")||0===c.indexOf("Win")||0===c.indexOf("linux")&&!a.android,a}(),ya=Object.prototype,za=Array.prototype,Aa=ya.toString,Ba=za.slice,Ca=/complete|loaded|interactive/,Da=/Element$/,Ea=/^\[object SVG\w*Element\]$/,Fa=" ",Ga=1,Ha=1e3,Ia="autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelected,contentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected",Ja={};Ia.replace(/\w+/g,function(a){Ja[a.toLowerCase()]=a});var Ka,La=["Webkit","","Moz","O"],Ma=qa.createElement("div"),Na=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,Oa="",Pa="";La.every(function(a){return Ma.style[a+"TransitionProperty"]!==ua?(a&&(Pa="-"+a.toLowerCase()+"-"),Ka=a.toLowerCase(),sa):void 0}),Ma=ta,Oa=Pa+"transform";var Qa={"[object HTMLDocument]":"Document","[object HTMLCollection]":"NodeList","[object StaticNodeList]":"NodeList","[object IXMLDOMNodeList]":"NodeList","[object DOMWindow]":"Window","[object global]":"Window","null":"Null",NaN:"NaN",undefined:"Undefined"};"Boolean,Number,String,Function,Array,Date,RegExp,Window,Document,Arguments,NodeList,Null,Undefined".replace(/\w+/gi,function(a){Qa["[object "+a+"]"]=a});var Ra=function(a,b){for(var c,d=-1,e=a.length,f=1;++d<e&&f;)c=a[d],f&=c.callback.apply(c.ctx,b)!==!1;return!!f},Sa={on:function(a,b,c){this._events=this._events||{},this._events[a]=this._events[a]||[];var d=this._events[a];return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){var d=this,e=E(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c)},off:function(a,b,c){var e,f,g,h,i,j,k,l;if(!a&&!b&&!c)return this._events=ua,this;for(h=a?[a]:d(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],g=this._events[a]){if(this._events[a]=e=[],b||c)for(k=0,l=g.length;l>k;k++)f=g[k],(b&&b!==f.callback&&b!==f.callback._callback||c&&c!==f.context)&&e.push(f);e.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=Ba.call(arguments,1),c=this._events[a],d=this._events.all,e=1;return c&&(e&=Ra(c,b)),d&&e&&(e&=Ra(d,b)),!!e}},Ta=qa.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:function(a,b){return a!==b&&(a.contains?a.contains(b):ra)},Ua=function(){function a(){x=ta,y=ta,z=ta}function b(a,b){return b&&D.forEach(function(c){a[c]=b[c]}),a}function c(a){return q(a).filter(function(a){return a.identifier===z})[0]}function d(a,b){return Math.sqrt(Math.pow(a,2)+Math.pow(b,2))}function e(a,b){var c=Math.atan2(b,a)/Math.PI*180;return 0>c?c+360:c}function f(a,b){var c=[],d=Math.abs(a),e=Math.abs(b),f=Math.tan(H/180*Math.PI),g=d>e;return(d>0||e>0)&&(c.push(g?a>0?"right":"left":b>0?"down":"up"),g&&e/d>f?c.push(b>0?"down":"up"):!g&&d/e>f&&c.push(a>0?"right":"left")),c}function g(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return ra;break;case"input":if(xa.ipad&&6===xa.osVersionN&&"file"===a.type||a.disabled)return ra;break;case"label":case"iframe":case"video":return ra}return/\bneedsclick\b/.test(a.className)}function h(a){switch(a.nodeName.toLowerCase()){case"textarea":return ra;case"select":return!xa.android;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return sa}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}}function i(a){return xa.android&&"select"===a.nodeName.toLowerCase()?"mousedown":"click"}function j(a,b){var c;qa.activeElement&&qa.activeElement!==a&&qa.activeElement.blur(),c=qa.createEvent("MouseEvents"),c.initMouseEvent(i(a),ra,ra,pa,1,b.screenX,b.screenY,b.clientX,b.clientY,sa,sa,sa,sa,0,ta),c.forwardedTouchEvent=ra,P&&a.dispatchEvent(c)}function k(a){return a.control!==ua?a.control:a.htmlFor?qa.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")}function l(a){var b=qa.createEvent("HTMLEvents");return b.initEvent(a,ra,ra),b}function m(a,c,d,g,h){var i=l(a);return i.offsetX=c,i.offsetY=d,i.degree=e(c,d),i.directions=f(c,d),h&&(i.duration=h,i.speedX=i.offsetX/h,i.speedY=i.offsetY/h),b(i,g)}function n(a,b){var c=x.origin,e=b.clientX-c.clientX,f=b.clientY-c.clientY;"tapping"===x.status||"pressing"===x.status?d(e,f)>G&&(x.status="panning",B=sa,C=ta,x.startMoveTime=a.timeStamp,clearTimeout(x.handler),x.handler=ta,p(m("pan",e,f,b))):"panning"===x.status&&p(m("pan",e,f,b))}function o(a,c){if(x.handler&&(clearTimeout(x.handler),x.handler=ta),"panning"===x.status){var e=x.origin,f=c.clientX-e.clientX,g=c.clientY-e.clientY,h=a.timeStamp-x.startMoveTime;p(m("panend",f,g,c,h)),I>h&&d(f,g)>K&&p(m("flick",f,g,c,h))}else"tapping"===x.status?p(b(l("tap"),c)):"pressing"===x.status&&(p(b(l("pressend"),c)),F&&p(b(l("tap"),c)))}function p(a){P&&y&&y.dispatchEvent(a)}function r(c){var d,e,f=c.changedTouches,g=c.timeStamp;if(E>g-M)return c.preventDefault(),sa;if(f.length>1)return ra;if(z)return N++,N>L&&a(),ra;if(d=f[0],d&&(y=c.target,z=d.identifier,x={origin:b({},d),timestamp:g,status:"tapping",handler:setTimeout(function(){x.status="pressing",p(b(l("press"),x.origin)),clearTimeout(x.handler),x.handler=ta},E)},!xa.pc)){if(xa.ios){if(e=pa.getSelection(),e.rangeCount&&!e.isCollapsed)return ra;if(z===A)return c.preventDefault(),sa;A=z}B=ra,C=y}return N=0,ra}function s(a){var b=c(a.changedTouches);return b&&x&&n(a,b),ra}function t(b){var d,e,f,i=c(b.changedTouches),l=b.timeStamp;if(i&&x&&(o(b,i),f=x.timestamp,a(),B)){if(E>l-M)return O=ra,ra;if(l-f>E)return ra;if(O=sa,M=l,d=C.nodeName.toLowerCase(),"label"===d){if(e=k(C)){if(Z(e),xa.android)return sa;C=e}}else if(h(C))return l-f>100||xa.ios&&pa.top!==pa&&"input"===d?(C=ta,sa):(Z(C),j(C,i),xa.ios&&"select"===d||(C=ta,b.preventDefault()),sa);return g(C)||(b.preventDefault(),j(C,i)),sa}return ra}function u(b){var d=c(b.changedTouches);return d&&x&&(C=ta,o(b,d),a()),ra}function v(a){return C?a.forwardedTouchEvent?ra:a.cancelable&&(!g(C)||O)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=ra,a.stopPropagation(),a.preventDefault(),sa):ra:ra}function w(a){var b;return B?(C=ta,B=sa,ra):"submit"===a.target.type&&0===a.detail?ra:(b=v(a),b||(C=ta),b)}var x,y,z,A,B,C,D=["screenX","screenY","clientX","clientY","pageX","pageY"],E=200,F=sa,G=10,H=15,I=300,K=100,L=3,M=0,N=0,O=sa,P=ra;return J(function(){var a=qa.body;xa.pc||(xa.android&&(T(a,"moveover",v,ra),T(a,"mousedown",v,ra),T(a,"mouseup",v,ra)),T(a,"click",w,ra)),T(a,"touchstart",r,ra),T(a,"touchmove",s,ra),T(a,"touchend",t,ra),T(a,"touchcancel",u,ra)}),{allowLongTap:function(){F=ra},on:function(){P=ra},off:function(){P=sa}}}(),Va=function(){function a(a){var b=a.parentNode;b&&Q(b,{"transform-style":"preserve-3d","backface-visibility":"hidden"})}function b(a){var b=a.parentNode;R(b,["transform-style","backface-visibility"])}var c,d,e,f,g=200,h=25,i="linear";return c=Pa+"transition-property",d=Pa+"transition-duration",f=Pa+"transition-delay",e=Pa+"transition-timing-function",function(j,k,l,m,n){function o(a){a&&a.target!==j||(U(j,s,o),y=ra,r(function(){v&&b(j),R(j,"transition"),w.resolve()}))}var q=arguments.length,s=Ka+"TransitionEnd",t={},u=[],v="";3>q&&(l=g),4>q&&(m=i),5>q&&(n=0),p(k,function(a,b){Na.test(a)?v+=a+"("+b+") ":t[a]=b,u.push(x(a))}),v&&(t[Oa]=v,u.push(Oa)),l>0&&(t[c]=u.join(", "),t[d]=l/1e3+"s",t[f]=n/1e3+"s",t[e]=m);var w=new G,y=sa;return l>0&&(T(j,s,o,sa),r(function(){y||o()},l+n+2*h)),r(function(){v&&a(j),Q(j,t),w.notify("start")},h),0>=l&&r(o),w}}(),Wa=function(a,b){for(var c=0,d=a.length;d>c;c+=1)if(Ta(a[c],b))return ra;return sa},Xa=/(\w+):\/\/\/?([^\:|\/]+)(\:\d*)?(.*\/)([^#|\?|\n]+)?(\?[^#]*)?(#.*)?/i,Ya=["url","protocol","hostname","port","path","name","query","hash"],Za={charset:"UTF-8",timeout:3e4,onComplete:ta,onTimeout:ta,onFail:ta},$a=qa.getElementsByTagName("head")[0],_a={script:function(a,b){var c=new G,d=b.charset,e=b.timeout,f=qa.createElement("script");return f.type="text/javascript",f.charset=d,c.startWith(function(){c.notify("element",f),ja(f,c,e),f.src=a})},style:function(a,b){var c=new G,d=b.charset,e=b.timeout,f=qa.createElement("link");return f.type="text/css",f.charset=d,f.rel="stylesheet",c.startWith(function(){ja(f,c,e),f.href=a})},image:function(a,b){var c=new G,d=new Image,e=b.timeout,f=ta;return d.onload=function(){d.onload=ta,d.onerror=ta,f&&clearTimeout(f),c.resolve(d)},d.onerror=function(){d.onload=ta,d.onerror=ta,f&&clearTimeout(f),c.reject({type:"Error"})},e&&(f=r(function(){d.onload=ta,d.onerror=ta,f&&clearTimeout(f),c.reject({type:"Timeout"})},e)),c.startWith(function(){d.src=a})}},ab="onorientationchange"in pa,bb=ab?"orientationchange":"resize",cb=F(),db=function(a){return a.width>a.height?"landscape":"portrait"};cb.get=function(){return db(ba(pa))},J(function(){var a=ba(pa);pa.addEventListener(bb,function(){var b=ba(pa);(a.width!==b.width||a.height!==b.height)&&(a=b,cb.trigger("change",{type:bb,width:b.width,height:b.height,orientation:db(b)}))})});var eb=["info","debug","warn","error"];eb.forEach(function(a,b){la[a]=function(){b>=wa.logLevel&&la(a,arguments)}});var fb=ia(location.href).query.logLevel;fb&&(wa.logLevel=parseInt(fb)),a("fetchNode",function(){function a(a){a.resolve()}return function(b){var c=b.options;return(new G).startWith(function(d){c.html||i(c.fetch)?c.html?a(d):c.fetch.length?c.fetch.call(b,function(b){c.html=b||"",a(d)}):(c.html=c.fetch.call(b)||"",a(d)):(c.html="",a(d))})}}),a("display",function(){return{show:function(a,b,c,d){var e=this;return e.isShow?(Q(e.root,o({width:"100%",height:"100%",zIndex:v()},c||b)),e.trigger("refresh")):(e.once("completed",function(){Q(e.root,o({width:"100%",height:"100%",zIndex:v()},b)),e.trigger("beforeShow"),wa.animate&&c?Va(e.root,c,d).done(function(){e.trigger("show")}):(Q(e.root,c||{}),e.trigger("show"))}),e.renderTo(j(a)?a:wa.appRoot)),e},hide:function(){var a=this;return a.isShow&&(a.trigger("beforeHide"),a.trigger("hide")),a}}}),a("pluginM",function(){var a=na._plugins={},b=[];return{add:function(b,c,d){var e=[].concat(b);e.forEach(function(b){a[b]||(a[b]={options:c,adapter:d})})},exists:function(b){return!!a[b]},get:function(b){return a[b]},setOpt:function(b,c){a[b]&&o(ra,a[b].options,c)},getGlobal:function(){return b},setGlobal:function(a){b=b.concat(a)}}}),a("widgetM",function(){var a=na._widgets={};return{add:function(b,c,d){a[b]={eventName:d&&(h(d)?d:"tap"),adapter:c}},exists:function(b){return!!a[b]},isEvent:function(b){return!!a[b].eventName},get:function(b){return a[b]},show:function(b,c,d,e){return a[b]?j(c)?a[b].adapter(c,d,e):a[b].adapter(ta,c,d):void 0}}}),a("module",function(){function a(a,b,c,d){return(new G).startWith(function(e){g.get(a,function(a){if(e.enabled)if(a){var f=function(b){"destroy"===b&&(a.destroy(),a=ta,e.reject())};a.parentModule=c,a.parentView=c.parentView,a.on("loadStart",function(){a.mergeParam(b),a.initialShow=!!d}),a.on("completed",function(){e.resolve(a)}),a.renderTo(c.container),a.on("destroy",function(){a=ta}),e.progress(f),e.all(function(){e.unProgress(f)})}else e.resolve(ta)})})}function c(a,b){var c=a.options.views;c.forEach(function(d,e){h(d)&&(c[e]=d={tag:d,name:d,param:{}}),-1===d.name.indexOf(":")&&b&&(d.name+=":"+b),a.addView(d.tag,d.name,d.param)})}function d(a){a.options.plugins.forEach(function(b){var c="string"==typeof b?b:b.name,d=b.options||{};j.exists(c)&&(a.plugins[c]=j.get(c)(a,d,wa))})}function e(a){a&&a.options&&a.options.styles&&Q(a.root,a.options.styles)}function f(a,b){var e=this;e.options=o(ra,{},k,a),e.param={},e.isReady=sa,e.container=ta,e.curTag=e.options.defaultTag||ta,e.tagList=[],e.parentView=ta,e.views={},e.plugins={},e.renderAll=e.options.renderAll,e.renderDefers=[],e.renderAllDefer=ta,e.renderOneDefer=ta,e.pushMessageTimer=ta,c(e,b),d(e)}var g,j=b("pluginM"),k={name:ta,defaultTag:ta,container:ta,renderAll:sa,ready:ta,views:[],plugins:[],renderEvent:ra};return o(f.prototype,{renderTo:function(b){var c,d=this,e=d.options.renderEvent;d.container=b,d.renderAll?d.renderAllDefers=H(d.renderDefers,d.tagList).done(function(){d.trigger("loaded")}).progress(function(a,b){b&&(e&&b.trigger("beforeShow"),d.views[a].entity=b,e&&b.trigger("show"))}):d.curTag?(c=d.views[d.curTag],c&&(d.renderOneDefer=a(c.name,c.param,d,ra).done(function(a){e&&a.trigger("beforeShow"),c.entity=a,e&&a.trigger("show"),d.trigger("loaded")}))):d.trigger("loaded"),d.isReady||(d.isReady=ra,d.trigger("ready"),ga(d.options.ready,d))},mergeParam:function(a){var b,c=this;o(ra,c.param,a),c.curTag&&c.views[c.curTag]&&(b=c.views[c.curTag],g.get(b.name,b.param).invoke("mergeParam",c.param))},addView:function(b,c,d){var e=this;b=b||c,e.renderAll&&!e.curTag&&(e.curTag=b),e.views[b]={name:c,param:d},e.tagList.push(b),e.renderAll&&e.renderDefers.push(a(c,d,e,e.curTag===b))},launch:function(b,c){var d,f,g=this,h=g.views[g.curTag],i=g.views[b];g.renderOneDefer&&(g.renderOneDefer.destroy(),g.renderOneDefer=ta),i&&(d=h&&h.entity,f=i.entity,g.curTag===b&&d?(d.mergeParam(o({},g.param,c)),d.trigger("refresh")):(g.renderAll?(f.mergeParam(o({},g.param,c)),d&&(d.trigger("beforeHide"),Q(d.root,"display","none")),f.trigger("beforeShow"),R(f.root,["visibility","display"]),e(f),f.trigger("show"),f.notify("actived"),d&&(d.trigger("hide"),d.notify("deactived")),g.curTag=b,g.trigger("launch",b,c)):(d&&d.trigger("beforeHide"),f=i.entity=ta,g.renderOneDefer=a(i.name,o({},i.param,g.param,c),g).done(function(a){a&&(f=i.entity=a,f.mergeParam(o({},g.param,c)),f.trigger("beforeShow"),d&&Q(d.root,"display","none"),R(f.root,["visibility","display"]),e(f),d&&d.trigger("hide"),f.trigger("show"),d&&(d.destroy(),h.entity=ta),g.trigger("launch",b,c))}).fail(function(){d&&(d.destroy(),h.entity=ta)})),g.curTag=b))},getCurViewOpt:function(){return this.views[this.curTag]},getCurView:function(){var a=this,b=a.curTag,c=a.views;return b&&c[b]?c[b].entity:ta},pushMessage:function(a,b){var c=this;c.curTag&&(c.views[c.curTag].entity?c.views[c.curTag].entity.trigger(a,b):(c.renderOneDefer||c.renderAllDefer).done(function(){c.views[c.curTag].entity&&c.views[c.curTag].entity.trigger(a,b)}))},destroy:function(){var a=this;p(a.views,function(a,b){b.entity&&b.entity.destroy&&b.entity.destroy(),b.entity=ta}),a.tagList.length=0,a.renderDefers.forEach(function(a){a.destroy()}),a.renderDefers.length=0,a.renderAllDefer&&a.renderAllDefer.destroy(),a.renderOneDefer&&a.renderOneDefer.destroy(),clearTimeout(a.pushMessageTimer),p(a.plugins,function(a,b){b&&i(b.destroy)&&b.destroy()}),y(a),a.destroyed=ra}},Sa),f.inject=function(a){g=a},f}),a("view",function(){function a(a){return qa.createElement(a?va.container:va.view)}function c(a){var b=a.options.init;p(b,function(b,c){a[b]=i(c)?c.bind(a):c})}function d(a){p(a.options.bindEvents,function(b,c){i(c)&&a.on(b,c.bind(a))})}function e(a,b){var c,d=a.options;d.subViews.forEach(function(a){d.modules.unshift({name:a.name+"-module",defaultTag:"index",container:a.container,ready:ta,views:[{tag:"index",name:a.name,param:a.param}],plugins:[],renderEvent:a.renderEvent})}),d.modules.forEach(function(d){a.hasModule=ra,c=new s(d,b),c.parentView=a,a.modules[d.name]=c})}function f(a){var b=a.options.isContainer?[]:v.getGlobal();b.concat(a.options.plugins).forEach(function(b){var c,d=h(b)?b:b.name,e=b.options||a.options[w(d)+"Options"]||{},f=v.get(d);f&&i(f.adapter)&&(c=i(e)?e:o(ra,{},f.options,e),a.plugins[d]=f.adapter(a,c,wa))})}function g(a,b){var c={param:{}};return p(fa(a),function(a,d){if(!a.indexOf(b)){var e=a.substring(b.length).replace(/\w/i,function(a){return a.toLowerCase()});e.indexOf("param")?c[e]=d:c.param[e.substring(5).replace(/\w/i,function(a){return a.toLowerCase()})]=d}}),c}function k(a,b){b=(h(b)?a.root.querySelector(b):b)||a.root,q(b.querySelectorAll("["+va.widget+"]")).forEach(function(b){var c,d,e,f,h,j=P(b,va.widget);x.exists(j)&&(d=x.get(j).eventName,f=x.get(j).adapter,e=function(){h=g(b,j),c=f(b,h,a),h.id&&(a.widgets[h.id]=c)},x.isEvent(j)?(h=g(b,j),d=h.eventType||d,T(b,d,e,sa),a.on("destroy",function(){U(b,d,e)})):a.isReady?e():a.on("ready",function(){e()}),a.on("destroy",function(){c&&i(c.destroy)&&c.destroy(),c=ta,f=ta,h=ta,e=ta}))})}function l(a){a.isReady=ra,a.trigger("ready"),ga(a.options.ready,a),a.trigger("completed")}function m(a){return a.split("-")[0].split(":")[1]}function n(a){var b=this;b.options=o(ra,{},B,a),b.name=b.options.name||"view-"+u(),b.isContainer=b.options.isContainer,b.container=ta,b.isReady=sa,b.isShow=sa,b.locked=sa,b.root=ta,b.nodes=ta,b.param={},b.parentModule=ta,b.parentView=ta,b.hasModule=sa,b.modules={},b.plugins={},b.widgets={},b.extra=o({},b.options.extra),b.renderEventTimer=ta,b.renderDeferred=new G,b.moduleDeferreds=[],b.modulParallelDeferred=ta,c(b),d(b),e(b,m(b.name)),f(b),b.on("show",function(){b.isShow=ra}),b.on("hide",function(){b.isShow=sa})}var s=b("module"),t=b("fetchNode"),v=b("pluginM"),x=b("widgetM"),z=b("display"),A=10,B={init:{},isContainer:sa,html:ta,fetch:ta,classNames:[],attrs:{},styles:{},destroyDom:ra,supportHash:ra,ready:ta,modules:[],subViews:[],plugins:[],bindEvents:{},extra:{}};return o(n.prototype,Sa,{renderTo:function(b){var c=this;return c.locked||(c.locked=ra,c.container=b,c.isReady?(c.trigger("rendered"),c.container.appendChild(c.root),c.trigger("loaded"),c.locked=sa,c.trigger("completed")):(c.root=a(c.isContainer),P(c.root,"qapp-name",c.name),W(c.root,c.options.classNames.join(" ")),P(c.root,c.options.attrs),Q(c.root,c.options.styles),c.trigger("loadStart"),t(c).done(function(){c.html=c.options.html,c.trigger("loadEnd"),c.container.appendChild(c.root),c.renderHTML().done(function(){c.trigger("rendered"),c.hasModule?(p(c.modules,function(a,b){c.moduleDeferreds.push((new G).startWith(function(a){b.once("loaded",function(){a.resolve()}),b.renderTo(b.options.container&&c.root.querySelector(b.options.container)||c.root)}))}),c.modulParallelDeferred=I(c.moduleDeferreds).done(function(){c.trigger("loaded"),c.locked=sa,l(c)})):(c.trigger("loaded"),c.locked=sa,l(c))})}))),c},renderHTML:function(a){var b=this,c=b.renderDeferred,d=function(a){b.renderEventTimer&&(clearTimeout(b.renderEventTimer),b.renderEventTimer=ta),b.renderEventTimer=r(function(){b.root&&c.resolve()},A)};return b.html=a||b.html,b.nodes=K(b.html).children,b.nodes.length?(T(b.root,"DOMNodeInserted",d,sa),L(b.root,b.nodes),c.done(function(){U(b.root,"DOMNodeInserted",d),k(b)}),b.renderEventTimer=r(function(){b.root&&c.resolve()},A)):b.root&&(k(b),c.resolve()),c},staticBuild:function(a){var b=this;return a&&j(a)&&(b.trigger("loadStart"),b.html=a.innerHTML||"",b.trigger("loadEnd"),b.container=a.parentNode||a,b.root=a,P(b.root,"qapp-name",b.name),W(b.root,b.options.classNames.join(" ")),P(b.root,b.options.attrs),Q(b.root,b.options.styles),b.nodes=q(a.children)||[],k(b),b.trigger("rendered"),b.trigger("loaded"),l(b),b.trigger("completed"),b.trigger("beforeShow"),b.trigger("show"),b.trigger("actived")),b},show:z.show,hide:z.hide,close:z.hide,mergeParam:function(a){var b=this;return o(ra,b.param,a),p(b.modules,function(a,c){c.mergeParam(b.param)}),b},getInnerView:function(a){var b,c,d=this;if(a)for(b in d.modules)if(c=d.modules[b].getCurViewOpt(),c.entity&&c.name===a)return c.entity;return ta},fn:function(a){var b=this;return function(){return i(b[a])?b[a].apply(this,q(arguments)):ta}},frontOn:function(a,b){var c=this,d=c._events[a]=c._events[a]||[];return d.unshift({callback:b,ctx:c}),c},dispatch:function(){var a=this,b=a.parentView,c=q(arguments);a.trigger.apply(a,c)&&b&&(b.isReady&&!b.locked?b.trigger.apply(b,c):b.on("completed",function(){b.trigger.apply(b,c)}))},notify:function(){var a,b=this,c=q(arguments);b.trigger.apply(b,c)&&b.hasModule&&p(b.modules,function(b,d){a=d.getCurView(),a&&a.notify.apply(a,c)})},scanWidget:function(a){k(this,a)},showWidget:function(a,b,c){return widgets[a]?j(b)?widgets[a].adapter(b,c,this):widgets[a].adapter(ta,b,c,this):void 0;
},destroy:function(){var a=this;return a.options.destroyDom&&N(a.root),clearTimeout(a.renderEventTimer),a.renderDeferred&&a.renderDeferred.destroy(),a.hasModule&&(a.moduleDeferreds.forEach(function(a){a.destroy()}),a.moduleDeferreds.length=0,a.modulParallelDeferred&&a.modulParallelDeferred.destroy()),p(a.modules,function(a,b){b.destroy()}),p(a.plugins,function(a,b){b&&i(b.destroy)&&b.destroy()}),p(a.widgets,function(a,b){b&&i(b.destroy)&&b.destroy()}),a.trigger("destroy"),a.off(),y(a),a.destroyed=ra,a}}),n}),a("taskQ",function(){function a(a){na.trigger("running",ra),H(a,[],ra).done(function(){c.forEach(function(a){a&&i(a.destroy)&&a.destroy()}),c=ta,na.trigger("running",sa)}).progress(function(){b.trigger("ev")})}var b=F(),c=ta,d=500,e={push:function(b){c?c.push(b):(c=[b],a(c))},pushTask:function(a){e.push((new G).startWith(function(b){try{a(b)}catch(c){}r(function(){b&&i(b.resolve)&&b.resolve()},d)}))},addListener:function(a){b.on("ev",a)}};return e}),a("viewM",function(){function a(a){}function c(a){return a.split(":")[0]}function d(b,c,d){var e;t[b]&&t[b][c]?d(t[b][c]):s[b]?(e=t[b][c]=new l(o({name:b+":"+c},s[b])),e.on("destroy",function(){t[b][c]=ta}),d(e)):a(b)}function e(b,c){var d=ta;return t[b]&&t[b][c]?d=t[b][c]:s[b]?(d=t[b][c]=new l(o({name:b+":"+c},s[b])),d.on("destroy",function(){t[b][c]=ta})):a(b),d}function f(a){var b=a.split(":");return{name:b[0],index:b[1]||0}}function g(a,b){p(b,function(b,c){0===b.indexOf("on")&&i(c)&&"onComplete"!=b&&a.on(b.substring(2).replace(/\w/,function(a){return a.toLowerCase()}),c)})}function k(a){return o.apply(ta,[ra,{}].concat(q(a).map(function(a){return h(a)?s[a]||{}:a})))}var l=b("view"),m=b("module"),n=b("taskQ"),s=na._viewOptionsMap={},t=na._viewMap={},u={define:function(a){h(a)&&(s[a]=k(arguments),t[a]=[])},undefine:function(a){h(a)&&(s[a]=ta)},getOptions:function(a){return s[a]},create:function(){var a=new l(k(arguments)),b=a.name;if(b){var c=f(b);t[c.name][c.index]=a,a.on("destroy",function(){t[c.name][c.index]=ta})}return a},structure:function(a,b){b=b||{},b.ani=h(b.ani)?{name:b.ani}:b.ani||{};var c=o(ra,{},u.getOptions(a.split(":")[0])),d=b.ani.name||wa.defaultAnimate;c.name=a,c.init=c.init||{},c.init.param=b.param||{},c.styles=o(c.styles||{},b.styles),c.classNames=(c.classNames||[]).concat(b.classNames),d&&(c.plugins=(c.plugins||[]).concat([{name:d,options:o({},u.getExtraOption(a,d),b.ani)}]));var e=u.create(c);return e.param=o({},b.param),g(e,b),e.complete=function(a){i(b.onComplete)&&b.onComplete.call(e,a)},e.on("callback",e.complete),e},build:function(a){var b,c=k(q(arguments).slice(1));return a&&j(a)&&(c.name=P(a,"qapp-name"),b=new l(c),b.staticBuild(a)),b},show:function(a,b){var c=q(arguments),d=u.structure(a,b);return n.pushTask(function(a){d.once("show",function(){a.resolve()}),d.once("hide",function(){r(function(){i(d.destroy)&&d.destroy()})}),d.show.apply(d,c.slice(2))}),d},exists:function(a){return!!s[a]},get:function(a,b){var c,e={};return h(a)&&(e=f(a)),i(b)?void d(e.name,e.index,function(a){b(a)}):c={invoke:function(){var a=q(arguments),b=a.shift();return d(e.name,e.index,function(c){ga(c[b],c,a)}),c},pushMessage:function(a,b){var d=t[e.name]&&t[e.name][e.index];return d&&d.trigger(a,b),c}}},getSync:function(a){var b,c={};return h(a)&&(b=a.split(":"),c={name:b[0],index:b[1]||0}),e(c.name,c.index)},getExtraOption:function(a,b){var d,e=s[c(a)];return e?(d=e.extra&&e.extra[wa.type]||e.extra||{},d[b]):void 0},getHashParams:function(a){var b=s[c(a)];return b?b.hashParams||[]:[]},getRealName:c};return m.inject(u),u}),a("viewQ",function(){function a(){var a,b=o[0];return b&&b.root&&(a=parseInt(Q(b.root,"z-index"))),(a||v())-1}function d(){return o.length?o[o.length-1]:void 0}function e(a){var b,c=o.length;for(b=c-1;b>-1;b--)if(o[b].name==a)return b;return-1}function f(a){if(a.indexOf(":new")>-1)return a.replace(":new",":"+u());for(var b=0,c=o.length;c>b;b++)if(a==o[b].name.split(":")[0])return!1;return a}function g(a,b,c,d,e){b=b||"show",p(function(f){a.on(b.replace("_",""),function(){r(function(){f.resolve().done(e)})}),i(c)?c():(a[b](d),b.indexOf("hide")>-1&&!d&&f.resolve())})}function h(a){g(a,"_hide",function(){l.hide.call(a)})}function j(a){var b=a.hide,c=a.close,d=a._events.actived=a._events.actived||[];d.unshift({callback:function(){s.preView=s.curView,s.curView=a.name},ctx:a}),a.once("hide",function(){var b=o.indexOf(a);b>-1&&(o.splice(b,1),r(function(){i(a.destroy)&&a.destroy()}))}),a.hide=a._hide=function(c){c===ra?b.call(a):p(function(c){a.once("hide",function(){r(c.resolve)}),b.call(a)})},a.close=a._close=function(b){b===sa?c.call(a):p(function(b){a.once("hide",function(){r(b.resolve)}),c.call(a)})}}var k,l=b("display"),m=b("taskQ"),n=b("viewM"),o=[],p=m.pushTask,q=n.getRealName,s={curView:ta,preView:ta,add:function(a,b,d,e){p(function(g){a=f(a);var h=i(e)?e:c;a&&n.exists(q(a))?(s[d?"unshift":"push"](n.structure(a,b),h),g.resolve()):g.resolve().done(h)})},push:function(a,b){j(a),a.once("show",function(){var b=d();b&&b.notify("deactived"),a.notify("actived"),o.push(a)}),g(a,"show",ta,sa,function(){b(a)})},unshift:function(b,c){j(b),b.once("show",function(){o.unshift(b),1===o.length&&b.notify("actived")}),b.on("beforeShow",function(){b.initialShow=sa,Q(b.root,"z-index",a()-1)}),g(b,"show",function(){b.show(ra)},sa,function(){c(b)})},pop:function(a,b,c){var e=d();if(a===ua&&(a=1),e&&a>0){var f=function(d){var f,i=o.length,j=i-a;if(j>=0)for(f=j;i-1>f;f++)h(o[f]);j>0&&a>0&&e.once("hide",function(){var a=o[j-1];a&&(a.notify("actived"),b&&b.data&&a.notify("receiveData",b))}),g(e,"_hide",ta,d,c)};p(function(b){a<o.length?f(ra):a==o.length&&(q(o[0].name)!==wa.indexView?(s.add(wa.indexView,{},ra),p(function(a){f(sa),a.resolve()})):o.length>1&&(a=o.length-1,f(ra))),b.resolve()})}},remove:function(a,b,c){p(function(d){var f=e(a);f>-1&&s.pop(o.length-f,b,c),d.resolve()})},backTo:function(a,b,c,d){p(function(f){var g=e(a),h=o.length;-1===g?s.add(q(a),{param:c},ra,function(a){k._reset(a),s.pop(h,b,d)}):(h=o.length-g-1,s.pop(h,b,d)),f.resolve()})},refresh:function(a){var b=d();b&&b.notify("receiveData",a)},clear:function(a,b){p(function(c){s.pop(o.length,a,b),c.resolve()})},inject:function(a){k=a}};return s}),a("history",function(){function a(a){return a.length>2&&a.lastIndexOf(":0")==a.length-2?a.substring(0,a.length-2):a}function c(a){a=Q(a);var b=v.getOptions(a);return b&&b.supportHash!==sa?E.all&&E.except.indexOf(a)>-1?sa:E.all||-1!==E.exist.indexOf(a)?ra:sa:sa}function d(a){return a[a.length-1]}function e(a,b){P.trigger("change",{type:a,data:o(ra,{},b)})}function f(){var a={},b=k();if(b.view&&b.view.indexOf("__")){if(z)K=L;else if(b.query[L])J=b.query[L],K=I+J;else{do J=u(),K=I+J;while(A[K]);m(b,ra)}try{a=JSON.parse(A.getItem(K))||{}}catch(c){}a.basePath==S&&(M=q(a.history),N=a.index,M[N]!==b.view&&(M=[],N=0,A.removeItem(K))),M.length||M.push(b.view)}}function g(){try{A.setItem(K,JSON.stringify({basePath:S,history:M,index:N}))}catch(a){}}function h(a,b){b?M[N]=a:(N++,M=M.slice(0,N),M.push(a)),g()}function i(){var a,b=w.hash,c=b.indexOf("#");return b=c>-1?b.slice(c+1):"",a=b.indexOf("#"),a>-1&&(b=b.slice(0,a)),b}function j(a,b){var c=S+"#"+a+"#";s=a,G?x[(b?"replace":"push")+"State"]({path:c},qa.title,c):b?w.replace(c):w.href=c}function k(b){b=b||i();var c=b.split("?"),d=a(c[0])||wa.indexView,e=D(c[1]||"",ra);return{view:d,query:e}}function l(){return t?t:t=C?function(){var a=k();return a[L]=ua,a}():d(O)}function m(a,b){a=a||{};var c,d=a.view||wa.indexView,e=a.query||{},f=l();if(b=b||d==f.view,t=ta,C)z||(e[L]=J),c=B(e,ra),j(d+(c?"?"+c:""),b),h(d,b);else{var g={view:d,query:e};b?O[O.length-1]=g:O.push(g)}}function n(a){var b,d=a?k(a):l(),f=d.view,i=M.indexOf(f);-1===i?(h(f),e("forward",{info:d})):(b=i-N,N=i,0>b?c(d.view)?e("back",{info:d,param:R.shift()}):x.back():0===b?e("refresh",{info:d}):1===b?c(d.view)?e("forward",{info:d}):x.go(N<M.length-1?1:-1):r(function(){w.reload()}),g())}function p(){pa.addEventListener(H,function(){s!==i()&&(s=i(),t=ta,n())})}var s,t,v=b("viewM"),w=pa.location,x=pa.history,y=pa.sessionStorage,z=!!y,A=z?pa.sessionStorage:pa.localStorage,C=ra,E=ta,G=!!x.pushState,H=G?"popstate":"hashchange",I="QAPP_HISTORY_",J=0,K="",L="_history",M=[],N=0,O=[],P=F(),Q=v.getRealName,R=[],S=function(){var a=w.href,b=a.indexOf("#");return b>-1&&(a=a.slice(0,b)),a}(),T={basePath:S,start:function(a){var b;if(C=!!a,s=i(),C){if(E=wa.hashSupport,b=l(),f(),!c(b.view)){if(N>0)return N--,t=ta,x.back(),g(),void r(function(){T.start(a)},100);b={view:wa.indexView,query:{}},m(b,ra)}e("init",{info:l()}),p()}else b={view:wa.indexView,query:k().query},O.push(b),e("init",{info:b})},analyzeHash:k,setHashInfo:m,getHashInfo:l,refreshParam:function(a){var b=l();b.query=o(b.query,a),m(b,ra)},back:function(a,b){var c=l().view,f={view:Q(c),name:c,data:b};if(a=a||1,C)if(R.push(f),N>a-1)x.go(-a);else{var g=wa.indexView;0===N&&g===c?(na.trigger("close"),x.go(-1)):(N>0&&x.go(-N),m({view:g},ra),e("home",{info:l()}))}else{var h=O.length-a;1>h&&(h=1),O=O.slice(0,h),t=ta,e("back",{info:d(O),param:f})}},backTo:function(a,b,c){var d,f=C?M:O.map(function(a){return a.view}),g=C?N:f.length-1;for(d=g;d>-1;d--)if(!c&&Q(f[d])===a||f[d]===a)return d===g?e("refresh",{info:l(),param:b}):T.back(g-d,b),ra;return sa},home:function(a){T.back(C?N:O.length-1,a)},exit:function(){na.trigger("close"),C?x.go(-N-1):x.back()},onChange:function(a){P.on("change",a)},buildHash:function(a){var b=a.view,c=a.query,d=B(c,ra);return S+"#"+b+(d?"?"+d:"")+"#"}};return T}),a("router",function(){function a(a){if(a){var b,c=a.complete;a.hide=function(a){s.back(1,a||b)},a.complete=function(d){b=d,ga(c,a,[d])}}}function c(b){f.onChange(function(b){var c=b.data,d=c.info,e=c.param,f=b.type;switch(f){case"init":wa.autoInit&&g.add(d.view,{param:d.query},ra,function(b){a(b),m.trigger(f,b)});break;case"forward":r(function(){g.add(d.view,{param:d.query},sa,function(b){a(b),m.trigger(f,b)})},100);break;case"refresh":g.refresh({view:h.getRealName(d.view),name:d.view,data:e}),m.trigger(f);break;case"back":case"home":r(function(){g.backTo(d.view,e,d.query,function(){m.trigger(f)})},100)}}),f.start(b)}function d(){l.add("router","tap",function(a){var b,c,d,e,g=a.el,h=P(g,"href"),i=P(g,"target"),j=D(P(g,"param")||"",ra);h.indexOf("#!")?h.indexOf("#")||(h=h.slice(1),b=f.analyzeHash(h),"_blank"===i?s.open(b.view+":new",{param:o(b.query,j)}):(e=b.view.split(":"),c=e.length>0,"0"==e[1]&&(b.view=e[0]),s.backTo(b.view,j,c)===sa&&s.open(b.view,{param:o(b.query,j)}))):2==h.indexOf("home")?s.home(j):(h=h.slice(2),d=h.match(k),d&&s.back(d[2]||1,j))})}function e(a){return function(){var b=q(arguments);return b[1]&&b[1].skipFilter||p.reduce(function(a,c){return a&&c(b)!==sa},ra)?ga(f[a],f,b):void 0}}var f=b("history"),g=b("viewQ"),h=b("viewM"),j=sa,k=/back(\((\d+)\))?/,l=ha(qa,[],va.role),m=F(),n=[],p=[],s=o(m,{start:function(a){j||(j=ra,c(a),d(),f.onChange(function(a){m.trigger("history",a)}))},open:function(b,c,d){var e=q(arguments);if(e[1]&&e[1].skipFilter||n.reduce(function(a,b){return a&&b(e)!==sa},ra)){c=c||{};var h=c.param||{};g.add(b,c,!!c.atBottom,function(b){b?(a(b),f.setHashInfo({view:b.name,query:h}),ga(d,b,[b])):ga(d)})}},back:e("back"),backTo:e("backTo"),home:e("home"),"goto":function(a,b,c,d){f.backTo(a,c,d)===sa&&s.open(a,b)},exit:f.exit,refreshParam:f.refreshParam,addOpenFilter:function(a){i(a)&&(n=n.concat(a))},removeOpenFilter:function(a){var b=n.indexOf(a);b>-1&&n.splice(b,1)},addBackFilter:function(a){i(a)&&(p=p.concat(a))},removeBackFilter:function(a){var b=p.indexOf(a);b>-1&&p.splice(b,1)},getCurViewName:function(a){return g.curView&&(a?g.curView:h.getRealName(g.curView))},getPreViewName:function(a){return g.preView&&(a?g.preView:h.getRealName(g.preView))},_newSite:function(){pa.open(f.basePath)},_reset:a});return g.inject(s),s});var gb=b("viewM"),hb=b("history"),ib=b("router"),jb=b("pluginM"),kb=b("widgetM"),lb={},mb=new G,nb=[];ma(function(){function a(){d=c.clientWidth,e=c.clientHeight,o(lb,{width:d,height:e,rootWidth:d-wa.root.left-wa.root.right,rootHeight:e-wa.root.top-wa.root.bottom}),Q(qa.body,"height",e+"px"),Q(f,{height:lb.rootHeight+"px",width:lb.rootWidth+"px"})}function b(){var b=c.clientHeight;b>=e&&b>e&&a()}var c=qa.documentElement,d=c.clientWidth,e=c.clientHeight,f=qa.createElement(va.app);if(na.root=wa.appRoot=f,o(lb,{width:d,height:e,rootTop:wa.root.top,rootLeft:wa.root.left}),Q(qa.body,"height",e+"px"),wa.customRoot?(lb.rootWidth=d-wa.root.left-wa.root.right,lb.rootHeight=e-wa.root.top-wa.root.bottom,Q(f,{top:lb.rootTop+"px",left:lb.rootLeft+"px",height:lb.rootHeight+"px",width:lb.rootWidth+"px"}),L(qa.body,f)):(lb.rootWidth=d,lb.rootHeight=e,f=qa.body),ib.start(!!wa.hashRouter),wa.screen&&(wa.screen.largeChange&&pa.addEventListener("resize",b),wa.screen.rotate&&cb.on("change",a)),wa.gesture&&(wa.gesture.ctrl&&na.on("running",function(a){Ua[a?"off":"on"]()}),wa.gesture.longTap&&na.gesture.allowLongTap(),wa.gesture.autoBlur)){var g=["INPUT","TEXTAREA"];T(qa.body,"touchstart",function(a){-1===g.indexOf(a.target.tagName.toUpperCase())&&$()})}}),na=o(na,F()),o(na,{config:function(a){var b=o(ra,wa,a),c=b.plugins,d=b.globalPlugins;return g(d)&&jb.setGlobal(d),g(c)?c.forEach(function(a){a&&c.name&&jb.setOpt(a.name,a.options)}):c&&p(c,function(a,b){a&&jb.setOpt(a,b)}),b},root:qa.body,origin:lb,defineView:gb.define,undefineView:gb.undefine,createView:gb.create,buildView:gb.build,existsView:gb.exists,getView:gb.get,getViewSync:gb.getSync,addPlugin:jb.add,configPlugin:jb.setOpt,setGlobalPlugins:jb.setGlobal,addWidget:kb.add,showWidget:kb.show,router:ib,open:ib.open,exit:ib.exit,view:gb,show:gb.show,showView:gb.show,hash:{getInfo:hb.getHashInfo,setInfo:hb.setHashInfo,analyzeHash:hb.analyzeHash,setParam:hb.refreshParam,build:hb.buildHash},sniff:xa});var ob=na.util={};ob.ready=J,na.ready=ma,na.addReadyDependencies=function(a){nb.push(a)},ob.query=function(a){return qa.querySelector(a)},ob.queryAll=function(a){return qa.querySelectorAll(a)},ob.is=e,ob.isObject=f,ob.isString=h,ob.isArray=g,ob.isFunction=i,ob.isNumber=k,ob.isElement=j,ob.isPlainObject=l,ob.isEmptyObject=m,ob.extend=o,ob.each=p,ob.makeArray=q,ob.delay=r,ob.associate=s,ob.mapping=t,ob.camelCase=w,ob.dasherize=x,ob.empty=y,ob.noop=c,ob.getUniqueID=u,ob.getZIndex=v,ob.jsonToQuery=B,ob.queryToJson=D,ob.parseURL=ia,ob.loader=ka,ob.builder=K,ob.appendNodes=L,ob.insertElement=M,ob.removeNode=N,ob.attr=P,ob.css=Q,ob.removeStyle=R,ob.addClass=W,ob.removeClass=X,ob.fixEvent=S,ob.addEvent=T,ob.removeEvent=X,ob.dispatchEvent=V,ob.createStyle=Y,ob.size=ba,ob.position=ea,ob.contains=Ta,ob.focus=Z,ob.blur=$,ob.animate=Va,ob.dataSet=fa,ob.delegatedEvent=ha,ob.CustEvent=ob.custEvent=Sa,ob.Deferred=ob.deferred=G,ob.queue=H,ob.parallel=I,ob.gesture=na.gesture=Ua,na.logger=ob.logger=la,pa.QApp=na,J(function(){nb.length?I(nb).done(function(){mb.resolve()}):mb.resolve()}),function(){function a(a){R(a,g)}function b(a){Q(a,h,""),R(a,h)}function c(a){return~(a+"").indexOf("%")||~(a+"").indexOf("px")?a:a+"px"}function d(a,b,c){b.on("loadEnd",function(){P(b.root,"qapp-ani",a),Q(b.root,h,"hidden")}),b.on("beforeHide",function(){$(b.root)}),b.on("destroy",function(){b.show=ta,b.hide=ta})}function e(a,b){var c,d,e=-1;for(c=0,d=a.length;d>c;c++)if(a[c].view===b){e=c;break}return e}function f(a,b,c,d,e){var f=0;return I(a.map(function(a,e){return b>e?(a.view.trigger("beforeHide"),Va(a.view.root,d?j(a.translate,0,0):j(0,a.translate,0),c)):(f+=a.distance,Va(a.view.root,d?j(f,0,0):j(0,f,0),c))}))}var g="display",h="visibility",i=function(){var a=navigator.userAgent.toLowerCase();return xa.ios||xa.android&&a.indexOf("micromessenger")>-1?1:2}(),j=1==i?function(a,b,c){return{translate3d:a+"px, "+b+"px, "+c+"px"}}:function(a,b,c){return{translate:a+"px, "+b+"px",translateZ:c+"px"}},k=10,l={position:"right",distance:0,duration:200,zIndex:0},m={},n=sa;na.addPlugin("moveEnter",l,function(g,h,p){var q,s,t={position:"absolute",top:0,zIndex:h.zIndex||v()},u=p.type.indexOf&&-1===p.type.indexOf("pad"),w="right"===h.position||"left"===h.position,x="right"===h.position||"bottom"===h.position?-1:1,y=sa,z=sa,A=sa;if(h.panBack===ua&&(h.panBack="app"===p.type),u&&(h.distance=w?lb.rootWidth:lb.rootHeight),q=x*h.distance,p.animate||(h.duration=0),u?(s=[],t.width="100%",t.height="100%"):(m[h.position]||(m[h.position]=[]),s=m[h.position],t[w?"height":"width"]="100%"),h.panBack&&u&&("right"===h.position||"left"===h.position)){var B=function(a){return~a.directions.indexOf(h.position)?a.clientX-a.offsetX<k:sa},C=function(a){A?Q(g.root,j(a.offsetX,0,0)):z||(z=ra,A=B(a))},D=function(a){A&&(A=sa,Math.abs(a.offsetX)>Math.abs(h.distance)/2?g.hide():Va(g.root,j(0,0,0),h.duration/2).done()),z=sa};g.on("show",function(){T(g.root,"pan",C),T(g.root,"panend",D)}),g.on("hide",function(){U(g.root,"pan",C),U(g.root,"panend",D)}),g.on("rendered",function(){var a=qa.createElement("div");a.className="touch-opacity",Q(a,{position:"absolute",zIndex:"9999",width:c(k),height:"100%",backgroundColor:"rgba(255, 255, 255, 0)"}),Q(a,"right"===h.position?"left":"right","0"),W(g.root,"shadow"),g.root.appendChild(a)})}return g.on("loaded",function(){h.distance||(h.distance=ba(g.root)[w?"width":"height"]),u?3===i?"bottom"===h.position?t.top=c(lb.rootHeight):t[h.position]=c(-h.distance):("bottom"===h.position?t.top=c(lb.rootHeight-h.distance):t[h.position]=c(0),o(t,w?j(-x*h.distance,0,0):j(0,-x*h.distance,0))):"bottom"!==h.position?t[h.position]=c(-h.distance):t.top=c(lb.rootHeight),Q(g.root,t)}),d("moveEnter",g,h),g.show=function(c){if($(),!n){n=ra,y=ra;var d=e(s,g);~d?f(s,d,c===ra||g.preventAnimate?0:h.duration,w).done(function(){s.splice(0,d).forEach(function(a){a.view.trigger("hide")}),n=sa,y=sa,g.trigger("refresh")}):(g.once("completed",function(){a(g.root),b(g.root),g.trigger("beforeShow"),s.unshift({view:g,distance:u?0:q,translate:u?-q:0}),r(function(){f(s,0,c===ra||g.preventAnimate?0:h.duration,w,g.root).done(function(){n=sa,y=sa,R(g.root,"transform"),g.trigger("show")})})}),g.renderTo(na.root))}return g},g.hide=function(a){if((!n||u&&!y)&&g.isShow){n=ra;var b=e(s,g);f(s,b+1,a===ra||g.preventAnimate?0:h.duration,w).done(function(){s.splice(0,b+1).forEach(function(a){a.view.trigger("hide")}),n=sa})}return g},g.on("destroy",function(){t=ta,s=ta,g=ta}),{setOption:function(a){h=o({},l,a)}}})}()}();