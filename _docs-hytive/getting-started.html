<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
  <meta name="description" content="description of your site">
  <meta name="author" content="author of the site">
  <title>QunarAPI Document 快速开始</title>
  <link rel="stylesheet" href="source/app.css"/>
  <link rel="stylesheet" href="source/highlight.min.css"/>
</head>
<body>
    <div class="ydoc">

      <header class="ydoc-header">
        <div class="ydoc-header-area">
            
            <button class="ydocIcon navbar-toggle">&#xf020;</button>
            <nav class="ydoc-nav">
              <ul class="navbar-left">
                
                    
                    <li class="">
                        
                        <a href="index.html">简介</a>
                        
                    </li>
                    
                    <li class="active">
                        
                        <a href="getting-started.html">快速开始</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="plugindev.html">插件开发</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="project.html">实战项目</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="resource_update.html">资源包更新</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="history.html">更新日志</a>
                        
                    </li>
                    
                
              </ul>
            </nav>
        </div>
    </header>
    
    <!-- <header style="height:20px"></header> -->
    
      <!-- Docs page layout -->
      
      <div class="ydoc-banner-bg">
          <div class="ydoc-banner">
              <div class="ydoc-banner-area">
                  <h1>Hytive 快速开始</h1>
                  <p>跨平台移动开发Hybrid解决方案</p>
              </div>
          </div>
      

      <div class="ydoc-container">
        
        <div class="ydoc-container-content  ydoc-container-content-hassidebar ">
            
            <div class="content-left" role="complementary">
              <nav class="docs-sidebar hidden-print hidden-xs hidden-sm">
                <ul class="nav docs-sidenav">
                  
                  
                  <li>
                      <a href="#概述">概述</a>
                  </li>
                  
                  
                  
                  <li>
                      <a href="#准备工作">准备工作</a>
                  </li>
                  
                  
                  
                  <li>
                      <a href="#第一个应用">第一个应用</a>
                  </li>
                  
                  
                  
                  
                  <ul class="nav docs-sidenav-extend">
                  
                      <li>
                          <a href="#创建Android应用">创建Android应用</a>
                      </li>
                  
                  
                  
                  
                  
                      <li>
                          <a href="#创建iOS应用">创建iOS应用</a>
                      </li>
                  
                  
                  
                </ul>
              </nav>
            </div>
            
            <div class="content-right right markdown-body"  role="main">
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="概述" class="page-header">概述</h2>
                  
                  
                  
                  <div>
                      <p>Hy 是移动跨平台移动应用程序解决方案，目前支持 Android 和 iOS，她不单可以让前端开发人员无缝开发 Native 应用程序，还可以使用 Native 端各种感应器，并结合 Server 可以达到静默升级；结合 QApp、Kami、Yo 来实现类 Native 的 JS 交互。另外 Native 开发人员也可以实现 Hy 插件来扩充 Hy 功能。</p>
<p>大体结构如下：
<img src="source/images/imsgagdfaf.png" alt="image"></p>
<blockquote>
<p>Biz H5 Zip：HTML的打包文件，Wagon Lib会通过检测Server版本信息来升级<br>Biz Plugin：扩展Wagon的功能<br>Wagon Lib：Wagon库文件  </p>
</blockquote>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="准备工作" class="page-header">准备工作</h2>
                  
                  
                  
                  <div>
                      <h3 id="首先回答几个问题：">首先回答几个问题：</h3><blockquote>
<p>服务器准备集成化管理还是自己部署？<br>Android支持的版本？</p>
</blockquote>
<h3 id="准备内容">准备内容</h3><blockquote>
<p>素材  </p>
<p>创建工程引入库文件  </p>
<p>创建iOS工程<br>创建Android工程<br>创建JS工程<br>创建Server  </p>
</blockquote>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="第一个应用" class="page-header">第一个应用</h2>
                  
                  
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h3 id="创建Android应用" class="page-header">创建Android应用</h3>
                  
                  
                  
                  <div>
                      <h3 id="1. 大客户端中使用HyBrid方案">1. 大客户端中使用HyBrid方案</h3><h4 id="使用自己的WebView打开Hybrid页面">使用自己的WebView打开Hybrid页面</h4><p><em>这种方式的特点是定制性强，自己可控。</em><br>1、添加对hy库的依赖。</p>
<pre><code class="lang-java">if (project.properties.&#39;adj&#39; || project.properties.&#39;rsj&#39;) {
//        compile &#39;com.qunar.spider:hy:1.0.0@aar&#39;
} else {
    compile &#39;com.qunar.spider:hy:1.0.0@aar&#39;
}
compile &#39;com.qunar.hy:browser:1.0.0@aar&#39;
compile &#39;com.qunar.hy:hypatch:1.0.0@aar&#39;
</code></pre>
<p>2、使用Hy库中的 <strong>HyPRWebView</strong> （封装了loading动画以及下拉刷新的WebView）布局。
3、HyPRWebView所在的View、Fragment或者Activity实现<strong>HyIBaseContext</strong>接口，并设置到HyPRWebView中。</p>
<pre><code class="lang-java">hyPRWebView.setIBaseContext(this);
</code></pre>
<p>4、根据业务组件的一个唯一标识(如HybridId)去获取 <strong>Project</strong> 实例，再在HyPRWebView
实例化时将此Project与HyPRWebView关联起来</p>
<pre><code class="lang-java">webView.setProject(ProjectManager.getInstance().getProject(唯一标识));
</code></pre>
<p>5、在project中注册自己的<strong>Plugin</strong></p>
<pre><code class="lang-java">Project project = ProjectManager.getInstance().getProject(唯一标识);
project.addPlugin(Plugin.class.getName());
</code></pre>
<h4 id="使用browser组件打开Hybrid页面">使用browser组件打开Hybrid页面</h4><p><em>使用新的scheme:&quot;qunaraphone://hy/url?url=&#39;xxx&#39;&amp;name=&#39;xxx&#39;&amp;type=&#39;xxx&#39;&amp;navigation=&#39;xxx&#39;&quot;。</em>
<em>参数跟webview.open类似</em></p>
<pre><code class="lang-java">try {
    JSONObject navigationJson = new JSONObject();
    JSONObject left = new JSONObject();
    left.put(&quot;style&quot;, &quot;icon&quot;);
    left.put(&quot;icon&quot;, &quot;\uf07d&quot;);

    JSONObject title = new JSONObject();
    title.put(&quot;text&quot;, &quot;hello&quot;);
    title.put(&quot;style&quot;, &quot;text&quot;);

    navigationJson.put(&quot;left&quot;, left);
    navigationJson.put(&quot;title&quot;, title);

    Bundle bundle = new Bundle();
    String url = &quot;http://hcy.qunar.com:8080/zzz.htm&quot;;
    url = URLEncoder.encode(url, &quot;utf-8&quot;);
    String navigation = URLEncoder.encode(navigationJson.toString(), &quot;utf-8&quot;);
    SchemeDispatcher.sendScheme(this,&quot;qunaraphone://hy/url?url=&quot; + url+&quot;&quot; +
            &quot;&amp;name=pageName&quot;+
            &quot;&amp;type=navibar-normal&quot;+
            &quot;&amp;navigation=&quot;+navigation);
} catch (Exception e) {

}
</code></pre>
<h3 id="2. 独立app中使用HyBrid方案">2. 独立app中使用HyBrid方案</h3><p>如果没有特殊定制需求，可以直接使用adr_tempate_app这个工程</p>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h3 id="创建iOS应用" class="page-header">创建iOS应用</h3>
                  
                  
                  
                  <div>
                      <p>接入大客户端可参考外卖和客栈民宿</p>
<h4 id="调用 Hy 内置 View Controller 打开 Hybrid 页面">调用 Hy 内置 View Controller 打开 Hybrid 页面</h4><blockquote>
<p>示例代码可以参考大客户中的 “外卖” 和 “客栈”。</p>
</blockquote>
<pre><code class="lang-objective-c">HYViewController *viewController = [[HYViewController alloc] initWithName:vcName];
viewController.homeNavTitle = title;
viewController.mainUrlString = mainUrl;
[[VCManager mainVCC] pushVC:viewController WithAnimation:[VCAnimationClassic defaultAnimation]];
</code></pre>
<h4 id="在自定义 View Controller 中嵌入 HYView">在自定义 View Controller 中嵌入 HYView</h4><p>如果不想使用 Hy 默认的 VC，可以自己实现一个，只需要把 HYView 嵌入其中即可。</p>
<blockquote>
<p>完整示例可以参考大客户端 HYWebVC.m</p>
</blockquote>
<p>HYView 的使用和普通的 UIView 几乎没有区别，如果不需要设置 Project，只需两步：</p>
<pre><code class="lang-objc">HYView *view = [[HYView alloc] initWithFrame:frame];
[parentView addSubview view];
</code></pre>
<p>默认情况下，新创建的 HYView 将会被绑定到 <code>commonProject</code> 上，基本上可以满足绝大多数的使用场景。</p>

                  </div>
                  
              </div>
              
              
            </div>
        </div>
        
      </div>
     
     </div>
     
      <footer class="footer">
        <div class="copyright">
            Made By Qunar Hotel FE Mobile Team. © 2014 - 2016<br /> Style Build By <a href='http://bootcss.com'>Bootstrap</a>
        </div>
      </footer>
    </div>
    <script src="source/jquery.min.js"></script>
    <script src="source/bootstrap.min.js"></script>
    <script src="source/docs.min.js"></script>
    <script src="source/highlight.min.js"></script>
    <script src="source/app.js"></script>
</body>
</html>
