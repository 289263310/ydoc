<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
  <meta name="description" content="description of your site">
  <meta name="author" content="author of the site">
  <title>Qunar React Native 组件</title>
  <link rel="stylesheet" href="source/app.css"/>
  <link rel="stylesheet" href="source/highlight.min.css"/>
</head>
<body>
    <div class="ydoc">

      <header class="ydoc-header">
        <div class="ydoc-header-area">
            
            <a href="http://ued.qunar.com/mobile/" class="navbar-brand">Qunar MFE</a>
            
            <button class="ydocIcon navbar-toggle">&#xf020;</button>
            <nav class="ydoc-nav">
              <ul class="navbar-left">
                
                    
                    <li class="">
                        
                        <a href="index.html">开始</a>
                        
                    </li>
                    
                    <li class="active">
                        
                        <a href="component.html">组件</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="extraUI.html">外部组件</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="api.html">API</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="extension.html">EXT</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="extending.html">扩展</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="demo.html">DEMO</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="faq.html">FAQ</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="releases.html">Releases</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="http://ued.qunar.com/react-web/" target="_blank">React Web</a>
                        
                    </li>
                    
                
              </ul>
            </nav>
        </div>
    </header>
    
    <!-- <header style="height:20px"></header> -->
    
      <!-- Docs page layout -->
      
      <div class="ydoc-banner">
          <div class="ydoc-banner-area">
              <h1>Qunar React Native 组件</h1>
              <p>组件</p>
          </div>
      </div>
      




      <div class="ydoc-container">
        
          
          <div class="ydoc-container-content">
              <div class="content-right">
                  <nav class="sidebar">
                    <ul class="nav docs-sidenav">
                        
                        
                        <li>
                            
                            <span>滚动和列表</span>
                            
                        </li>
                        
                        
                        
                        
                        <ul class="docs-sidenav-extend">
                        
                            <li>
                                <a href="component-ScrollView.html" >ScrollView</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-RefreshControl.html" >RefreshControl</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-LoadControl.html" >LoadControl</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-ListView.html" >ListView</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-InfiniteListView.html" style="color:#0088a4">InfiniteListView</a>
                            </li>
                        
                        </ul>
                        
                        
                        
                        
                        <li>
                            
                            <span>状态</span>
                            
                        </li>
                        
                        
                        
                        
                        <ul class="docs-sidenav-extend">
                        
                            <li>
                                <a href="component-Loading.html" >Loading</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-ProgressView.html" >ProgressView</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-QLoading.html" >QLoading</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-QLoadingError.html" >QLoadingError</a>
                            </li>
                        
                        </ul>
                        
                        
                        
                        
                        <li>
                            
                            <span>元素</span>
                            
                        </li>
                        
                        
                        
                        
                        <ul class="docs-sidenav-extend">
                        
                            <li>
                                <a href="component-Button.html" >Button</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-Checked.html" >Checked</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-Radio.html" >Radio</a>
                            </li>
                        
                        </ul>
                        
                        
                        
                        
                        <li>
                            
                            <span>分段</span>
                            
                        </li>
                        
                        
                        
                        
                        <ul class="docs-sidenav-extend">
                        
                            <li>
                                <a href="component-Tab.html" >Tab</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-TabBar.html" >TabBar</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-TabBarItem.html" >TabBarItem</a>
                            </li>
                        
                        </ul>
                        
                        
                        
                        
                        <li>
                            
                            <span>其他</span>
                            
                        </li>
                        
                        
                        
                        
                        <ul class="docs-sidenav-extend">
                        
                            <li>
                                <a href="component-Slider.html" >Slider</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-TimePicker.html" >TimePicker</a>
                            </li>
                        
                        
                        
                        
                        
                            <li>
                                <a href="component-Modal.html" >Modal</a>
                            </li>
                        
                        
                        
                    </ul>
                  </nav>
              </div>
              <div class="content-left markdown-body">
                
                <h1>
    InfiniteListView
    <small>无限缓存列表</small>
    <span class="yo-badge yo-badge-danger" style="font-size: 0.16rem;vertical-align: bottom;">>=1.1.0</span>
</h1>
<div class="api-content"><p>这是一个适用于渲染数据很多时候的无限缓存列表，使用方式和接口和ListView基本一致，但性能比ListView更好。需要注意的是每行必须等高，如果不等高需要用configureRowHeight进行指定。</p>
</div>

<h2>属性</h2>

<blockquote class="api">
    <strong>dataSource</strong>
     <span>{ ListViewDataSource }</span>
    
</blockquote>
<div class="api-content"><p>源数据。</p>
</div>



<blockquote class="api">
    <strong>initialListSize</strong>
     <span>{ number }</span>
    
</blockquote>
<div class="api-content"><p>指定在组件刚挂载的时候渲染多少行数据。用这个属性来确保首屏显示合适数量的数据，而不是花费太多帧逐步显示出来。</p>
</div>



<blockquote class="api">
    <strong>onEndReached</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>当所有的数据都已经渲染过，并且列表被滚动到距离最底部不足onEndReachedThreshold个像素的距离时调用。原生的滚动事件会被作为参数传递。</p>
</div>



<blockquote class="api">
    <strong>onEndReachedThreshold</strong>
     <span>{ number }</span>
    
</blockquote>
<div class="api-content"><p>调用onEndReached之前的临界值，单位是像素。</p>
</div>



<blockquote class="api">
    <strong>pageSize</strong>
     <span>{ number }</span>
    
</blockquote>
<div class="api-content"><p>每次事件循环（每帧）渲染的行数。</p>
</div>



<blockquote class="api">
    <strong>renderFooter</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>() =&gt; renderable</p>
<p>页头与页脚会在每次渲染过程中都重新渲染（如果提供了这些属性）。如果它们重绘的性能开销很大，可以考虑使用renderStaticHeader/renderStaticFooter。页脚会永远在列表的最底部，而页头会在最顶部。</p>
</div>



<blockquote class="api">
    <strong>renderHeader</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>() =&gt; renderable</p>
<p>同renderFooter，渲染页尾组件。</p>
</div>



<blockquote class="api">
    <strong>renderStaticFooter</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>() =&gt; renderable</p>
<p>只渲染一次的头部组件。</p>
</div>



<blockquote class="api">
    <strong>renderStaticHeader</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>() =&gt; renderable</p>
<p>只渲染一次的尾部组件。</p>
</div>



<blockquote class="api">
    <strong>renderRow</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>(rowData, sectionID, rowID, highlightRow) =&gt; renderable</p>
<p>从数据源(Data source)中接受一条数据，以及它和它所在section的ID。返回一个可渲染的组件来为这行数据进行渲染。默认情况下参数中的数据就是放进数据源中的数据本身，不过也可以提供一些转换器。</p>
</div>


<p class="api-content">
    <small class="text-muted">方法参数:</small>
</p>
<div class="docs-table api-content">
    <table class="yo-table yo-table-border">
        <colgroup>
            <col class="c1">
            <col class="c2">
            <col class="c3">
            <col class="c4">
        </colgroup>
        <thead>
            <tr class="active">
                <th>参数名</th>
                <th>类型</th>
                <th>描述</th>
                <th>必选</th>
                <th>版本</th>
            </tr>
        </thead>
        
        <tr>
            <td>rowData</td>
            <td>React.PropTypes.any</td>
            <td>数据源中的数据</td>
            <td>
                
                <i class="yo-ico glyphicon glyphicon-ok text-success"></i> 
            </td>
            <td></td>
        </tr>
        
        <tr>
            <td>sectionID</td>
            <td>string</td>
            <td>所处section名</td>
            <td>
                
                <i class="yo-ico glyphicon glyphicon-ok text-success"></i> 
            </td>
            <td></td>
        </tr>
        
        <tr>
            <td>rowID</td>
            <td>number</td>
            <td>所处section中的index</td>
            <td>
                
                <i class="yo-ico glyphicon glyphicon-ok text-success"></i> 
            </td>
            <td></td>
        </tr>
        
        <tr>
            <td>highlightRow</td>
            <td>function</td>
            <td>通过调用该函数可通知InfiniteListView高亮该行</td>
            <td>
                
                <i class="yo-ico glyphicon glyphicon-ok text-success"></i> 
            </td>
            <td></td>
        </tr>
        
    </table>
</div>


<blockquote class="api">
    <strong>renderScrollComponent</strong>
     <span>{ function }</span>
    
</blockquote>
<div class="api-content"><p>(props) =&gt; renderable</p>
<p>指定一个函数，在其中返回一个可以滚动的组件。InfiniteListView将会在该组件内部进行渲染。默认情况下会返回一个包含指定属性的ScrollView。</p>
</div>


<p class="api-content">
    <small class="text-muted">方法参数:</small>
</p>
<div class="docs-table api-content">
    <table class="yo-table yo-table-border">
        <colgroup>
            <col class="c1">
            <col class="c2">
            <col class="c3">
            <col class="c4">
        </colgroup>
        <thead>
            <tr class="active">
                <th>参数名</th>
                <th>类型</th>
                <th>描述</th>
                <th>必选</th>
                <th>版本</th>
            </tr>
        </thead>
        
        <tr>
            <td>可滚动组件的属性</td>
            <td>object</td>
            <td></td>
            <td>
                
                <i class="yo-ico glyphicon glyphicon-ok text-success"></i> 
            </td>
            <td></td>
        </tr>
        
    </table>
</div>


<blockquote class="api">
    <strong>scrollRenderAheadDistance</strong>
     <span>{ number }</span>
    
</blockquote>
<div class="api-content"><p>当一个行接近屏幕范围多少像素之内的时候，就开始渲染这一行。</p>
</div>



<blockquote class="api">
    <strong>useOriginScrollView</strong>
     <span>{ bool }</span>
    
</blockquote>
<div class="api-content"><p>如果提供了此属性，会使用原生ScrollView，配置了renderScrollComponent时不生效。</p>
</div>



<blockquote class="api">
    <strong>scrollEventThrottle</strong>
     <span>{ React.PropTypes.number }</span>
    
</blockquote>
<div class="api-content"><p>触发onScroll最小间隔毫秒数，默认值为50。</p>
</div>



<blockquote class="api">
    <strong>configureRowHeight</strong>
     <span>{ React.PropTypes.func }</span>
    
</blockquote>
<div class="api-content"><p>(rowData, rowID) =&gt; number 指定每一行的高度。</p>
</div>





<h2>方法</h2>

<blockquote class="api">
    <strong>startRefreshing</strong>
    
</blockquote>
<div class="api-content"><p>同ScrollView，当前组件有refreshControl属性，并且没有正在下拉刷新，则强制触发下拉刷新，变成正在刷新的状态。</p>
</div>


<blockquote class="api">
    <strong>stopRefreshing</strong>
    
</blockquote>
<div class="api-content"><p>同ScrollView，当前组件有refreshControl属性，并且正在下拉刷新，则停止下拉刷新的状态。</p>
</div>


<blockquote class="api">
    <strong>startLoading</strong>
    
</blockquote>
<div class="api-content"><p>同ScrollView，当前组件有loadControl属性，并且没有正在加载，则强制触发加载更多，变成正在加载更多的状态。</p>
</div>


<blockquote class="api">
    <strong>stopLoading</strong>
    
</blockquote>
<div class="api-content"><p>同ScrollView，当前组件有loadControl属性，并且正在加载，则停止加载更多的状态。</p>
</div>


<blockquote class="api">
    <strong>scrollTo</strong>
    
</blockquote>
<div class="api-content"><p>同ScrollView ScrollTo。</p>
</div>


<blockquote class="api">
    <strong>scrollToIndex</strong>
    
</blockquote>
<div class="api-content"><p>第一个参数为目标index，第二个参数为configs对象，里面可配置animated: bool。</p>
</div>


<blockquote class="api">
    <strong>scrollToTop</strong>
    
</blockquote>
<div class="api-content"><p>立即回到顶部，相当于scrollTo({y: 0})</p>
</div>


<blockquote class="api">
    <strong>getScrollResponder</strong>
    
</blockquote>
<div class="api-content"><p>获取ScrollView，当使用原生ScrollView时(useOriginScrollView属性为true)返回滚动响应器。</p>
</div>




<h2>示例</h2>
<pre class="ydoc-example"><code>
import React, {
	Component,
	StyleSheet,
	View,
	Text,
	TouchableOpacity,
	Image,
	InfiniteListView,
} from 'qunar-react-native'

class InfiniteListViewExample extends Component {
    constructor(props){
        super(props)

        const ds = new InfiniteListView.DataSource({
            rowHasChanged: (r1, r2) =&gt; r1 !== r2,
        })
        let rows = []
        for(let i = 0; i &lt; 200; i++){
            rows.push(i)
        }
        this.state = {
            rows: rows,
        	dataSource: ds.cloneWithRows(rows),
        }
    }

    render() {
        // 通过configureRowHeight配置不同行高
        return (
            &lt;View style={styles.container}&gt;
                &lt;InfiniteListView
                    ref="InfiniteListView"
                    dataSource={this.state.dataSource}
                    configureRowHeight={(rowData, rowIndex) =&gt; {return rowData % 10 === 0 ? 120 : 100}}
                    renderRow={(rowData) =&gt; &lt;ListViewExampleRow title={rowData} text={this.state.text}/&gt;}
                /&gt;
            &lt;/View&gt;
        )
    }
}

class ListViewExampleRow extends Component {
    constructor(props){
        super(props)
    }

    render() {
        const {title, text} = this.props
        const url = 'http://placeholdit.imgix.net/~text?txtsize=33&bg=666&txtclr=fff&txt=' + title + '&w=100&h=110',
            randomText = Number(title) % 100

        return (
            &lt;View style={styles.row}&gt;
                &lt;Image
                    style={[styles.rowImg]}
                    source={{uri: 'http://placeholdit.imgix.net/~text?txtsize=33&bg=666&txtclr=fff&txt=' + title + '&w=100&h=110'}}
                /&gt;

                &lt;View style={[styles.rowContent]}&gt;
                    &lt;View style={{flexDirection: 'row'}}&gt;
                        &lt;Text style={styles.titleText}&gt;{title}&lt;/Text&gt;
                    &lt;/View&gt;
                    &lt;View&gt;
                        &lt;Text style={{color: '#25a4bb'}}&gt;{randomText}分 / {randomText}条评论&lt;/Text&gt;
                        &lt;Text style={[styles.alignRight, {color: 'orange'}]}&gt;{randomText}起&lt;/Text&gt;
                    &lt;/View&gt;
                    &lt;View&gt;
                        &lt;View style={[styles.labelWrap]}&gt;
                            &lt;Text style={[styles.labelText]}&gt;label{randomText}&lt;/Text&gt;
                            &lt;Text style={[styles.labelText]}&gt;label{randomText}&lt;/Text&gt;
                            &lt;Text style={[styles.labelText]}&gt;label{randomText}&lt;/Text&gt;
                        &lt;/View&gt;
                        &lt;Text style={[styles.alignRight]}&gt;{randomText}折vip&lt;/Text&gt;
                    &lt;/View&gt;
                    &lt;View&gt;
                        &lt;Text style={styles.detailText}&gt;地点：首都机场{randomText}&lt;/Text&gt;
                        &lt;TouchableOpacity style={[styles.alignRight]}&gt;
                            &lt;Text style={[styles.button]}&gt;预定&lt;/Text&gt;
                        &lt;/TouchableOpacity&gt;
                    &lt;/View&gt;
                &lt;/View&gt;
            &lt;/View&gt;
        )
    }
}

const styles = StyleSheet.create({
    container: {
        flex: 1,
        backgroundColor: '#fff',
    },
    row: {
        flexDirection: 'row',
        alignItems: 'center',
        overflow: 'hidden',
    },
    rowImg: {
        flex: 1,
        height: 100,
        resizeMode: 'stretch',
    },
    rowContent: {
        flex: 3,
        padding: 7,
    },
    titleText: {
        fontWeight: 'bold',
        fontSize: 14,
    },
    detailText: {
        marginTop: 3,
        color: '#999',
        fontSize: 12,
    },
    alignRight: {
        position: 'absolute',
        top: 0,
        right: 0,
    },
    button: {
        padding: 2,
        borderRadius: 4,
        color: '#fff',
        backgroundColor: '#09c',
    },
    labelWrap: {
        flexDirection: 'row',
    },
    labelText: {
        marginRight: 3,
        borderRadius: 3,
        borderWidth: 1,
        borderColor: '#09c',
    },
	operationButton: {
		padding: 5,
		borderWidth: 1,
		borderColor: '#069',
		borderRadius: 5,
	}
})

module.exports = {
    title: 'ImageTextList',
    examples: [{
        render: () =&gt; {
            return &lt;InfiniteListViewExample/&gt;
        }
    }]
};
</code></pre>



              </div>
          </div>
          
        
      </div>

      <footer class="footer">
        <div class="copyright">
            © 2015 - 2016 Qunar 平台前端架构组. Powered by <a href="http://gitlab.corp.qunar.com/mfe/qdoc">qdoc</a>
        </div>
      </footer>
    </div>
    <script src="source/jquery.min.js"></script>
    <script src="source/highlight.min.js"></script>
    <script src="source/app.js"></script>
</body>
</html>
