<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
  <meta name="description" content="description of your site">
  <meta name="author" content="author of the site">
  <title>Qunar React Native for Web 起步</title>
  <link rel="stylesheet" href="source/app.css"/>
  <link rel="stylesheet" href="source/highlight.min.css"/>
</head>
<body>
    <div class="ydoc">

      <header class="ydoc-header">
        <div class="ydoc-header-area">
            
            <a href="http://ued.qunar.com/mobile/" class="navbar-brand">Qunar</a>
            
            <button class="ydocIcon navbar-toggle">&#xf020;</button>
            <nav class="ydoc-nav">
              <ul class="navbar-left">
                
                    
                    <li class="">
                        
                        <a href="index.html">简介</a>
                        
                    </li>
                    
                    <li class="active">
                        
                        <a href="start.html">起步</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="develop.html">开发</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="publish.html">发布</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="component.html">组件</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="api.html">API</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="extension.html">扩展</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="demo.html">DEMO</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="releases.html">版本</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="http://ued.qunar.com/qrn/" target="_blank">QRN</a>
                        
                    </li>
                    
                
              </ul>
            </nav>
        </div>
    </header>
    
    <!-- <header style="height:20px"></header> -->
    
      <!-- Docs page layout -->
      
      <div class="ydoc-banner-bg">
          <div class="ydoc-banner">
              <div class="ydoc-banner-area">
                  <h1>起步</h1>
                  <p>起步</p>
              </div>
          </div>
      




      <div class="ydoc-container">
        
          
          <div class="ydoc-container-content">
              <div class="content-left" role="complementary">
                  <nav class="docs-sidebar hidden-print hidden-xs hidden-sm">
                    <ul class="nav docs-sidenav">
                        
                        
                        <!-- <li  > -->
                        <li >
                            
                            <a href="#起步">起步</a>
                            
                        </li>
                        
                        
                        
                        
                        <ul class="nav docs-sidenav-extend"  >
                        
                            <li >
                                <a href="#既有React Native项目转touch">既有React Native项目转touch</a>
                            </li>
                        
                        
                        
                        
                        
                            <li >
                                <a href="#新项目">新项目</a>
                            </li>
                        
                        
                        
                    </ul>
                  </nav>
              </div>
              <div class="content-right markdown-body" role="main">
                
                <h2 id="起步">起步</h2><h3 id="既有React Native项目转touch">既有React Native项目转touch</h3><h5 id="1.修改package.json，执行&quot;qnpm install&quot;">1.修改package.json，执行&quot;qnpm install&quot;</h5><ul>
<li>react-native版本“^internal-v1.4.0”</li>
<li>@qnpm/react-native-ext-fetch版本“^0.0.5”</li>
</ul>
<pre><code class="lang-javascript">{
  &quot;name&quot;: &quot;bnbrn&quot;,
  ...
  &quot;dependencies&quot;: {
    &quot;@qnpm/react-native-ext-fetch&quot;: &quot;^0.0.5&quot;,
    &quot;react-native&quot;: &quot;git+ssh://git@gitlab.corp.qunar.com:react_native/qunar_react_native.git#internal-v1.4.0&quot;,
    &quot;react-native-swiper&quot;: &quot;^1.4.3&quot;
  }
}
</code></pre>
<h5 id="2.手动初始化项目">2.手动初始化项目</h5><p>执行</p>
<pre><code class="lang-shell">    files=&quot;build-web.sh fekit.config index.html index.jsp mock.js&quot;;
    for file in $files;do
        cp -f node_modules/react-native/local-cli/generator-web/templates/$file .
    done
</code></pre>
<h5 id="3.同【新项目】后续第2步">3.同【新项目】后续第2步</h5><h3 id="新项目">新项目</h3><h5 id="1.创建Qunar React Native项目">1.创建Qunar React Native项目</h5><p>执行命令：</p>
<pre><code class="lang-sh">    react-native init webtest -t 需要执行tag或者branch; cd webtest
</code></pre>
<p>具体参见<a href="http://ued.qunar.com/Qunar React Native/index-%E9%A1%B9%E7%9B%AE%E5%88%9B%E5%BB%BA.html" target="_blank">创建 Qunar React Native 项目</a></p>
<p>根目录下会创建以下文件：</p>
<ul>
<li>index.html【开发预览】</li>
</ul>
<pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;TODO supply a title&lt;/title&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script src=&quot;prd/platform.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;prd/biz.js&quot;&gt;&lt;/script&gt;
        &lt;!--Hy已经内置了QunarAPI--&gt;
        &lt;!--登陆js api，如果使用QLogin功能必须引入--&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;http://common.qunarzz.com/ucapi/prd/scripts/index.js?ver=1.0.2&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>index.jsp【后端发布】</li>
</ul>
<pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;bnb&lt;/title&gt;
        &lt;meta charset=&quot;UTF-8&quot;&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script src=&quot;platform@&lt;!-- include(&quot;/ver/scripts/platform.js.ver&quot;) --&gt;.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;biz@&lt;!-- include(&quot;/ver/scripts/biz.js.ver&quot;) --&gt;.js&quot;&gt;&lt;/script&gt;
        &lt;!--Hy已经内置了QunarAPI--&gt;
        &lt;!--登陆js api，如果使用QLogin功能必须引入--&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;http://common.qunarzz.com/ucapi/prd/scripts/index.js?ver=1.0.2&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<ul>
<li>fekit.config</li>
</ul>
<pre><code class="lang-javascript">{

}
</code></pre>
<ul>
<li>mock.js</li>
</ul>
<pre><code class="lang-javascript">module.exports = {
    &quot;/prd/platform.js&quot;: &quot;http://127.0.0.1:8081/index.bundle?platform=web&amp;bundleType=platform&quot;,
    &quot;/prd/biz.js&quot;: &quot;http://127.0.0.1:8081/index.bundle?platform=web&amp;bundleType=biz&quot;,
    &quot;/index.map&quot;: &quot;http://127.0.0.1:8081/index.map&quot;,
    &quot;/qrcode&quot;: &quot;http://127.0.0.1:8081/qrcode&quot;,
    ...
}
</code></pre>
<ul>
<li>用于发布离线包的index.yaml</li>
</ul>
<pre><code class="lang-yaml">hybridid : testhbd
version : 1
iOS_vid : vid_80011092 # 所在iOS平台的版本
android_vid : vid_60001091,com.mqunar.atom.browser_11 # 所在Android平台的版本
domain : # 域名替换
  www.baidu.com : 59.151.11.20
remote :
  - +http://bnb.qunar.com/touch/index.html
  - http://source.qunar.com/waimai-app/unlogin.png
  - http://simg1.qunarzz.com/fonts/bnbhybrid/1.0.1/Qunar.woff
  - http://simg1.qunarzz.com/fonts/bnbhybrid/1.0.1/Qunar.ttf
</code></pre>
<ul>
<li>构建脚本build-web.sh【可以新增逻辑，不要修改既有逻辑】</li>
</ul>
<pre><code class="lang-bash"> ...
</code></pre>
<h5 id="2.启动服务">2.启动服务</h5><p>执行</p>
<pre><code class="lang-sh">    npm start
    fekit server [-p port] -m mock.js # 用fekit是为了使用fekit的mock功能 - -||，发布的时候并不需要fekit
</code></pre>
<h5 id="3.打开浏览器">3.打开浏览器</h5><p>打开chrome，开启模拟器，输入 <a href="http://localhost:port/index.html">http://localhost:port/index.html</a> 或者 <a href="http://127.0.0.1:port/index.html">http://127.0.0.1:port/index.html</a></p>
<p>也可以打开 <a href="http://localhost:port/qrcode">http://localhost:port/qrcode</a> ，手机扫描二维码预览</p>

              </div>
          </div>
          
        
      </div>
     
     </div>
     
      <footer class="footer">
        <div class="copyright">
            © 2015 - 2016 Qunar 平台前端架构组. Powered by <a href="http://gitlab.corp.qunar.com/mfe/qdoc">qdoc</a>
        </div>
      </footer>
    </div>
    <script src="source/jquery.min.js"></script>
    <script src="source/bootstrap.min.js"></script>
    <script src="source/docs.min.js"></script>
    <script src="source/highlight.min.js"></script>
    <!-- <script src="http://cdn.bootcss.com/bootstrap/3.2.0/js/bootstrap.js"></script> -->
    <!-- <script src="//cdn.bootcss.com/bootstrap/4.0.0-alpha.2/js/umd/scrollspy.js"></script>
    <script src="//cdn.bootcss.com/bootstrap/3.2.0/js/affix.js"></script> -->
    <script src="source/app.js"></script>
</body>
</html>
