<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge, chrome=1">
  <meta name="description" content="description of your site">
  <meta name="author" content="author of the site">
  <title>QunarAPI Document 常见问题</title>
  <link rel="stylesheet" href="source/app.css"/>
  <link rel="stylesheet" href="source/highlight.min.css"/>
</head>
<body>
    <div class="ydoc">

      <header class="ydoc-header">
        <div class="ydoc-header-area">
            
            <button class="ydocIcon navbar-toggle">&#xf020;</button>
            <nav class="ydoc-nav">
              <ul class="navbar-left">
                
                    
                    <li class="">
                        
                        <a href="qunarapi.html">简介</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="qunarapi-getting-started.html">快速开始</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="qunarapi-api.html">API</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="qunarapi-errorcode.html">错误码</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="qunarapi-appendix.html">附录</a>
                        
                    </li>
                    
                    <li class="">
                        
                        <a href="qunarapi-tools.html">工具</a>
                        
                    </li>
                    
                    <li class="active">
                        
                        <a href="qunarapi-Q&A.html">常见问题</a>
                        
                    </li>
                    
                
              </ul>
            </nav>
        </div>
    </header>
    
    <!-- <header style="height:20px"></header> -->
    
      <!-- Docs page layout -->
      
      <div class="ydoc-banner-bg">
          <div class="ydoc-banner">
              <div class="ydoc-banner-area">
                  <h1>Qunar API 常见问题</h1>
                  <p>桥接native功能和浏览器的JavaScript API</p>
              </div>
          </div>
      

      <div class="ydoc-container">
        
        <div class="ydoc-container-content">
            
            <div class="content-left" role="complementary">
              <nav class="docs-sidebar hidden-print hidden-xs hidden-sm">
                <ul class="nav docs-sidenav">
                  
                  
                  <li>
                      <a href="#WebView相关">WebView相关</a>
                  </li>
                  
                  
                  
                  <li>
                      <a href="#Scheme相关">Scheme相关</a>
                  </li>
                  
                  
                  
                  <li>
                      <a href="#插件相关">插件相关</a>
                  </li>
                  
                  
                  
                  <li>
                      <a href="#Tips">Tips</a>
                  </li>
                  
                  
                </ul>
              </nav>
            </div>
            
            <div class="content-right right markdown-body"  role="main">
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="WebView相关" class="page-header">WebView相关</h1>
                  
                  
                  
                  <div>
                      <h4 id="Q: 我希望在hytive的webView中使用一些特殊的标签协议，比如SMS、mailto、tel，是否支持">Q: 我希望在hytive的webView中使用一些特殊的标签协议，比如SMS、mailto、tel，是否支持</h4><p>A: 现在大客户端中是支持这些特殊的标签的，使用的方法如下：</p>
<pre><code class="lang-html">&lt;a href=&quot;SMS:13000000000&quot;&gt;发送短信到xxx&lt;/a&gt;
&lt;a href=&quot;SMS:13000000000&amp;body=123&quot;&gt;发送短信到xxx，内容为xx&lt;/a&gt;
&lt;a href=&quot;mailto:xxx@qunar.com&quot;&gt;发送邮件到xxx&lt;/a&gt;
&lt;a href=&quot;tel:13000000000&quot;&gt;打电话给xxx&lt;/a&gt;
</code></pre>
<p>但是现在还存在一些问题，<code>SMS:</code>在iOS中body不能设置为中文，如果设置为中文会导致在点击后出现页面卡死的情况，因此需要中文得先使用encodeURI()转码，同时在界面的切换上也存在一些问题。<code>mailto:</code>还不支持参数的设置，后续还需要排期来完善
<br/></p>
<h4 id="Q: hytive的webView在加载的时候有个loading加载动画页面，但是页面中也使用html5写了一个loading加载动画用来控制页面的加载请求，因此会导致页面看起来有2个加载的动画，怎样来解决这个问题呢？">Q: hytive的webView在加载的时候有个loading加载动画页面，但是页面中也使用html5写了一个loading加载动画用来控制页面的加载请求，因此会导致页面看起来有2个加载的动画，怎样来解决这个问题呢？</h4><p>A: webView在开始加载资源的时候会出现白屏的情况，因此我们添加了一个loading动画的页面。双loading动画的根源在于前端需要通过loading页面来控制加载请求，而前端对于native端loading页面关闭的时间是不可控的。如果前端可以控制native隐藏loading动画的时间就不再需要使用html5来写一个新的loading页面。   </p>
<p>为了控制native端的loading动画关闭时间需要使用2个QunarAPI：<a href="http://hy.qunar.com/docs/qunarapi-api.html#WebView事件-QunarAPI-onLoadingClose">QunarAPI.onLoadingClose</a> 和<a href="http://hy.qunar.com/docs/qunarapi-api.html#界面操作接口-QunarAPI-hideLoadView">QunarAPI.hideLoadView</a></p>
<pre><code class="lang-js">// 先在页面一开始调用如下api设置navtive的loading页面由前端来关闭
QunarAPI.onLoadingClose({
success: function( data, callback){
    callback( {data: true} );
});


//在需要关闭loading页面的时候调用下面的api就可以关闭loading页面
QunarAPI.hideLoadView({})
</code></pre>
<h4 id="Q: 如何判断去哪儿客户端中的webview是普通的webview还是支持qunarAPI的webiew">Q: 如何判断去哪儿客户端中的webview是普通的webview还是支持qunarAPI的webiew</h4><p>A: 有三种方法：   </p>
<ul>
<li>如果有QApp和QApp-Hy的话，用QApp.hy.sniff.hyApp判断   </li>
<li>如果没有的话，自己写一个</li>
</ul>
<pre><code class="lang-js">document.addEventListener(&#39;WebViewJavascriptBridgeReady&#39;, function (event) {
     // 进了这个就说明是hy的
}
</code></pre>
<ul>
<li>或者判断</li>
</ul>
<pre><code class="lang-js">if(typeof ___WebViewJavascriptBridgeReady___ === &#39;undefined&#39;){
    // 说明是不支持hy的webView，不过这个有可能是hy环境没有注入完成，所以在页面加载完成一段时间后判断比较准确
}
</code></pre>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="Scheme相关" class="page-header">Scheme相关</h1>
                  
                  
                  
                  <div>
                      <h4 id="Q: 过去的大客户端跳转的scheme根据平台不同分为qunariphone （iOS）和qunaraphone （android）,页面需要判断平台来设置不同的scheme，是否可以简化这部分的工作">Q: 过去的大客户端跳转的scheme根据平台不同分为qunariphone （iOS）和qunaraphone （android）,页面需要判断平台来设置不同的scheme，是否可以简化这部分的工作</h4><p> A: 如果你的页面是在<strong  style="color:#ff0000">Qunar大客户端</strong>中，那么你可以简化统一使用qunarhy作为跳转的scheme。你只需要用qunarhy替换之前的qunariphone或者qunaraphone，完全兼容之前的跳转参数！！！<br> 在<strong  style="color:#ff0000">Qunar大客户端</strong>中点击网址 <a href="qunarhy://hy?url=http://hy.qunar.com/docs/Q&amp;A.html">qunarhy://hy?url=http://hy.qunar.com/docs/Q&amp;A.html</a> 可以在iOS和android中都跳转到当前页面。<br> 更多scheme使用参数可以点击<a href="http://wiki.corp.qunar.com/pages/viewpage.action?pageId=96653941">使用说明</a>   </p>
<p> <strong><em>注意：</em></strong>使用简化的qunarhy作为跳转的scheme仅在大客户端中有效，如果从外部的其他APP跳转到大客户端则还是需要使用qunariphone （iOS）或者 qunaraphone （android）</p>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="插件相关" class="page-header">插件相关</h1>
                  
                  
                  
                  <div>
                      <h4 id="Q: 如何编写一个新的插件，native部分的代码怎么编写">Q: 如何编写一个新的插件，native部分的代码怎么编写</h4><p>A: native代码的编写可以参阅<a href="http://hy.qunar.com/docs/plugindev.html">Hytive部分</a>
如果需要把插件扩展到QunarAPI可以参阅<a href="http://hy.qunar.com/docs/qunarapi-api.html#基础接口-QunarAPI-register">QunarAPI.register</a></p>

                  </div>
                  
              </div>
              
              
              
              <div class="docs-section">
                  
                  
                  <h2 id="Tips" class="page-header">Tips</h1>
                  
                  
                  
                  <div>
                      <ul>
<li><p>先调用设置分享内容的插件，然后调用<code>QunarAPI.hy.showShareItems()</code>弹出分享界面。设置分享内容需要时间，最好提前设置。</p>
</li>
<li><p>如果多种分享的渠道设置的内容是一样的可以直接使用<a href="http://hy.qunar.com/docs/qunarapi-api.html#分享接口-QunarAPI-onMenuShare">QunarAPI.onMenuShare</a>来设置</p>
</li>
</ul>

                  </div>
                  
              </div>
              
              
            </div>
        </div>
        
      </div>
     
     </div>
     
      <footer class="footer">
        <div class="copyright">
            Made By Qunar Hotel FE Mobile Team. © 2014 - 2016<br /> Style Build By <a href='http://bootcss.com'>Bootstrap</a> 
        </div>
      </footer>
    </div>
    <script src="source/jquery.min.js"></script>
    <script src="source/bootstrap.min.js"></script>
    <script src="source/docs.min.js"></script>
    <script src="source/highlight.min.js"></script>
    <script src="source/app.js"></script>
</body>
</html>
